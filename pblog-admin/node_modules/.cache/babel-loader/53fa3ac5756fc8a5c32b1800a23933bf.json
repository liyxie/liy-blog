{"remainingRequest":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\babel-loader\\lib\\index.js!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\eslint-loader\\index.js??ref--13-0!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\src\\utils\\menu.js","dependencies":[{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\src\\utils\\menu.js","mtime":1721286705996},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\babel.config.js","mtime":1721286705921},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1721358892040},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1721358892834},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\eslint-loader\\index.js","mtime":1721358890895}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuYXJyYXkuc29ydC5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwppbXBvcnQgImNvcmUtanMvbW9kdWxlcy93ZWIuZG9tLWNvbGxlY3Rpb25zLmZvci1lYWNoLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMuZnVuY3Rpb24ubmFtZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLmFycmF5LnB1c2guanMiOwppbXBvcnQgeyBnZXRUb2tlbiB9IGZyb20gJ0AvdXRpbHMvYXV0aCc7CmltcG9ydCBMYXlvdXQgZnJvbSAnQC9sYXlvdXQnOwpleHBvcnQgZnVuY3Rpb24gYXJyYXlTb3J0KHByb3BlcnR5KSB7CiAgcmV0dXJuIGZ1bmN0aW9uIChhLCBiKSB7CiAgICB2YXIgdmFsdWUxID0gYVtwcm9wZXJ0eV07CiAgICB2YXIgdmFsdWUyID0gYltwcm9wZXJ0eV07CiAgICByZXR1cm4gdmFsdWUxIC0gdmFsdWUyOwogIH07Cn0KZXhwb3J0IGZ1bmN0aW9uIGZpbHRlckFzeW5jUm91dGVyKGRhdGEpIHsKICBkYXRhLnNvcnQoYXJyYXlTb3J0KCdzb3J0Tm8nKSk7CiAgZGF0YS5mb3JFYWNoKGZ1bmN0aW9uIChpdGVtKSB7CiAgICByZXR1cm4gaXRlbS5jaGlsZHJlbi5zb3J0KGFycmF5U29ydCgnc29ydE5vJykpOwogIH0pOwogIHZhciBtZW51cyA9IFtdOwogIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKGl0ZW0udHlwZSAhPT0gJ2J0bicpIHsKICAgICAgdmFyIGhpZGRlbiA9IGZhbHNlOwogICAgICBpZiAoaXRlbS5oaWRkZW4gPT09IDApIHsKICAgICAgICBoaWRkZW4gPSB0cnVlOwogICAgICB9CiAgICAgIHZhciBtZW51ID0gewogICAgICAgIHBhdGg6IGl0ZW0udXJsLAogICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgLy8gaXNTaG93OiBoaWRkZW4sCiAgICAgICAgaGlkZGVuOiBoaWRkZW4sCiAgICAgICAgc29ydE5vOiBpdGVtLnNvcnRObywKICAgICAgICBtZXRhOiB7CiAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSwKICAgICAgICAgIGtlZXBBbGl2ZTogdHJ1ZQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKGl0ZW0udXJsLmluZGV4T2YoJ3Rva2VuJykgPj0gMCkgewogICAgICAgIG1lbnUucGF0aCA9IGl0ZW0udXJsICsgZ2V0VG9rZW4oKTsKICAgICAgfQogICAgICBpZiAoaXRlbS5jb21wb25lbnQgIT0gbnVsbCAmJiBpdGVtLmNvbXBvbmVudCAhPT0gJycpIHsKICAgICAgICBtZW51LmNvbXBvbmVudCA9IGl0ZW0uY29tcG9uZW50ID09PSAnTGF5b3V0JyA/IExheW91dCA6IGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICByZXR1cm4gcmVxdWlyZShbIkAvdmlld3MiLmNvbmNhdChpdGVtLmNvbXBvbmVudCldLCByZXNvbHZlKTsKICAgICAgICB9OwogICAgICB9CiAgICAgIGlmIChpdGVtLnJlZGlyZWN0ICE9IG51bGwgJiYgaXRlbS5yZWRpcmVjdCAhPT0gJycpIHsKICAgICAgICBtZW51LnJlZGlyZWN0ID0gaXRlbS5yZWRpcmVjdDsKICAgICAgfQogICAgICBpZiAoaXRlbS5pY29uICE9IG51bGwgJiYgaXRlbS5pY29uICE9PSAnJykgewogICAgICAgIG1lbnUubWV0YS5pY29uID0gaXRlbS5pY29uOwogICAgICB9IGVsc2UgewogICAgICAgIG1lbnUubWV0YS5pY29uID0gJ3Rhc2snOwogICAgICB9CiAgICAgIGlmIChpdGVtLmNvbXBvbmVudCA9PT0gJ0xheW91dCcpIHsKICAgICAgICBnZW5lcmFNZW51KG1lbnUuY2hpbGRyZW4sIGl0ZW0uY2hpbGRyZW4pOwogICAgICB9CiAgICAgIG1lbnVzLnB1c2gobWVudSk7CiAgICB9CiAgfSk7CiAgbWVudXMucHVzaCh7CiAgICBwYXRoOiAnKicsCiAgICByZWRpcmVjdDogJy80MDQnLAogICAgaGlkZGVuOiB0cnVlCiAgfSk7CiAgcmV0dXJuIG1lbnVzOwp9CmV4cG9ydCBmdW5jdGlvbiBnZW5lcmFNZW51KHJvdXRlcywgZGF0YSkgewogIGRhdGEuZm9yRWFjaChmdW5jdGlvbiAoaXRlbSkgewogICAgaWYgKGl0ZW0udHlwZSAhPT0gJ2J0bicpIHsKICAgICAgdmFyIGhpZGRlbiA9IGZhbHNlOwogICAgICBpZiAoaXRlbS5oaWRkZW4gPT09IDApIHsKICAgICAgICBoaWRkZW4gPSB0cnVlOwogICAgICB9CiAgICAgIHZhciBtZW51ID0gewogICAgICAgIHBhdGg6IGl0ZW0udXJsLAogICAgICAgIGNoaWxkcmVuOiBbXSwKICAgICAgICBuYW1lOiBpdGVtLm5hbWUsCiAgICAgICAgLy8gaXNTaG93OiBoaWRkZW4sCiAgICAgICAgaGlkZGVuOiBoaWRkZW4sCiAgICAgICAgc29ydE5vOiBpdGVtLnNvcnRObywKICAgICAgICBtZXRhOiB7CiAgICAgICAgICB0aXRsZTogaXRlbS50aXRsZSwKICAgICAgICAgIGtlZXBBbGl2ZTogdHJ1ZQogICAgICAgIH0KICAgICAgfTsKICAgICAgaWYgKGl0ZW0udXJsLmluZGV4T2YoJ3Rva2VuJykgPj0gMCkgewogICAgICAgIG1lbnUucGF0aCA9IGl0ZW0udXJsICsgZ2V0VG9rZW4oKTsKICAgICAgfQogICAgICBpZiAoaXRlbS5jb21wb25lbnQgIT0gbnVsbCAmJiBpdGVtLmNvbXBvbmVudCAhPT0gJycpIHsKICAgICAgICBtZW51LmNvbXBvbmVudCA9IGl0ZW0uY29tcG9uZW50ID09PSAnTGF5b3V0JyA/IExheW91dCA6IGZ1bmN0aW9uIChyZXNvbHZlKSB7CiAgICAgICAgICByZXR1cm4gcmVxdWlyZShbIkAvdmlld3MiLmNvbmNhdChpdGVtLmNvbXBvbmVudCldLCByZXNvbHZlKTsKICAgICAgICB9OwogICAgICB9CiAgICAgIGlmIChpdGVtLnJlZGlyZWN0ICE9IG51bGwgJiYgaXRlbS5yZWRpcmVjdCAhPT0gJycpIHsKICAgICAgICBtZW51LnJlZGlyZWN0ID0gaXRlbS5yZWRpcmVjdDsKICAgICAgfQogICAgICBpZiAoaXRlbS5pY29uICE9IG51bGwgJiYgaXRlbS5pY29uICE9PSAnJykgewogICAgICAgIG1lbnUubWV0YS5pY29uID0gaXRlbS5pY29uOwogICAgICB9IGVsc2UgewogICAgICAgIG1lbnUubWV0YS5pY29uID0gJ3Rhc2snOwogICAgICB9CiAgICAgIGlmIChpdGVtLmNvbXBvbmVudCA9PT0gJ0xheW91dCcpIHsKICAgICAgICBnZW5lcmFNZW51KG1lbnUuY2hpbGRyZW4sIGl0ZW0uY2hpbGRyZW4pOwogICAgICB9CiAgICAgIHJvdXRlcy5wdXNoKG1lbnUpOwogICAgfQogIH0pOwogIHJldHVybiByb3V0ZXM7Cn0="},{"version":3,"names":["getToken","Layout","arraySort","property","a","b","value1","value2","filterAsyncRouter","data","sort","forEach","item","children","menus","type","hidden","menu","path","url","name","sortNo","meta","title","keepAlive","indexOf","component","resolve","require","concat","redirect","icon","generaMenu","push","routes"],"sources":["E:/MyWenJian/Blogs/rulin-blog/pblog-admin/src/utils/menu.js"],"sourcesContent":["import { getToken } from '@/utils/auth'\r\nimport Layout from '@/layout'\r\n\r\nexport function arraySort(property) {\r\n  return function(a, b) {\r\n    const value1 = a[property]\r\n    const value2 = b[property]\r\n    return value1 - value2\r\n  }\r\n}\r\nexport function filterAsyncRouter(data) {\r\n  data.sort(arraySort('sortNo'))\r\n  data.forEach(item => item.children.sort(arraySort('sortNo')))\r\n  const menus = []\r\n  data.forEach(item => {\r\n    if (item.type !== 'btn') {\r\n      let hidden = false\r\n      if (item.hidden === 0) { hidden = true }\r\n      const menu = {\r\n        path: item.url,\r\n        children: [],\r\n        name: item.name,\r\n        // isShow: hidden,\r\n        hidden: hidden,\r\n        sortNo: item.sortNo,\r\n        meta: { title: item.title, keepAlive: true }\r\n      }\r\n      if (item.url.indexOf('token') >= 0) {\r\n        menu.path = item.url + getToken()\r\n      }\r\n      if (item.component != null && item.component !== '') {\r\n        menu.component = item.component === 'Layout' ? Layout : resolve => require([`@/views${item.component}`], resolve)\r\n      }\r\n      if (item.redirect != null && item.redirect !== '') {\r\n        menu.redirect = item.redirect\r\n      }\r\n      if (item.icon != null && item.icon !== '') {\r\n        menu.meta.icon = item.icon\r\n      } else {\r\n        menu.meta.icon = 'task'\r\n      }\r\n      if (item.component === 'Layout') {\r\n        generaMenu(menu.children, item.children)\r\n      }\r\n      menus.push(menu)\r\n    }\r\n  })\r\n  menus.push({ path: '*', redirect: '/404', hidden: true })\r\n  return menus\r\n}\r\nexport function generaMenu(routes, data) {\r\n  data.forEach(item => {\r\n    if (item.type !== 'btn') {\r\n      let hidden = false\r\n      if (item.hidden === 0) { hidden = true }\r\n      const menu = {\r\n        path: item.url,\r\n        children: [],\r\n        name: item.name,\r\n        // isShow: hidden,\r\n        hidden: hidden,\r\n        sortNo: item.sortNo,\r\n        meta: { title: item.title, keepAlive: true }\r\n      }\r\n      if (item.url.indexOf('token') >= 0) {\r\n        menu.path = item.url + getToken()\r\n      }\r\n      if (item.component != null && item.component !== '') {\r\n        menu.component = item.component === 'Layout' ? Layout : resolve => require([`@/views${item.component}`], resolve)\r\n      }\r\n      if (item.redirect != null && item.redirect !== '') {\r\n        menu.redirect = item.redirect\r\n      }\r\n      if (item.icon != null && item.icon !== '') {\r\n        menu.meta.icon = item.icon\r\n      } else {\r\n        menu.meta.icon = 'task'\r\n      }\r\n      if (item.component === 'Layout') {\r\n        generaMenu(menu.children, item.children)\r\n      }\r\n      routes.push(menu)\r\n    }\r\n  })\r\n  return routes\r\n}\r\n"],"mappings":"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"}]}