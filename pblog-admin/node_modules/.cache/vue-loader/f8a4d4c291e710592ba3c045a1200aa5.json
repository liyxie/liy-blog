{"remainingRequest":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\src\\views\\system\\menu.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\src\\views\\system\\menu.vue","mtime":1721286706019},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1721358892040},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1721358892834},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1721358892040},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1721358887250}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2ZldGNoTWVudSwgY3JlYXRlTWVudSwgcmVtb3ZlTWVudSwgdXBkYXRlTWVudX0gZnJvbSAnQC9hcGkvc3lzdGVtJw0KaW1wb3J0IEljb25zRGlhbG9nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvSWNvbnNEaWFsb2ciOw0KaW1wb3J0IHttYXBHZXR0ZXJzfSBmcm9tICJ2dWV4IjsNCmltcG9ydCB7aGFzQXV0aH0gZnJvbSAiQC91dGlscy9hdXRoIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgSWNvbnNEaWFsb2cNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAgc2hvd0hlYWRlcjogZmFsc2UsIC8v5piv5ZCm5pi+56S66KGo5aS0DQogICAgICBoaWRkZW5UeXBlczogWyd3YXJuaW5nJywgJ3N1Y2Nlc3MnXSwNCiAgICAgIGhpZGRlbk9wdGlvbnM6IFsn5ZCmJywgJ+aYryddLA0KICAgICAgbWVudUxldmVsVHlwZTogWydzdWNjZXNzJywgJ2RhbmdlcicsICd3YXJuaW5nJ10sDQogICAgICBtZW51TGV2ZWxPcHRpb25zOiBbJ+S4gOe6p+iPnOWNlScsICfkuoznuqfoj5zljZUnXSwNCiAgICAgIGlzRWRpdEZvcm06IDAsDQogICAgICB0aXRsZTogbnVsbCwNCiAgICAgIC8vIOWKoOi9veWxguS/oeaBrw0KICAgICAgbG9hZGluZzogW10sDQogICAgICBmb3JtOiB7fSwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwNCiAgICAgIGljb25zVmlzaWJsZTogZmFsc2UsDQogICAgICBmb3JtTGFiZWxXaWR0aDogJzEyMHB4JywNCiAgICAgIG1lbnVEYXRhOiBbXSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHVybDogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpXVybCcsIHRyaWdnZXI6ICdjaGFuZ2UnfQ0KICAgICAgICBdLA0KICAgICAgICBpY29uOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup5Zu+5qCHJywgdHJpZ2dlcjogJ2NoYW5nZSd9DQogICAgICAgIF0sDQogICAgICAgIGxldmVsOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36YCJ5oup6I+c5Y2V57qn5YirJywgdHJpZ2dlcjogJ2NoYW5nZSd9DQogICAgICAgIF0sDQogICAgICAgIGNvbXBvbmVudDogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpei3r+eUseWcsOWdgCcsIHRyaWdnZXI6ICdjaGFuZ2UnfQ0KICAgICAgICBdLA0KICAgICAgICBoaWRkZW46IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fpgInmi6nmmK/lkKbmmL7npLonLCB0cmlnZ2VyOiAnY2hhbmdlJ30NCiAgICAgICAgXSwNCiAgICAgICAgdGl0bGU6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IHRydWUsIG1lc3NhZ2U6ICfor7fovpPlhaXoj5zljZXlkI3np7AnLCB0cmlnZ2VyOiAnY2hhbmdlJ30sDQogICAgICAgICAge21pbjogMSwgbWF4OiA2LCBtZXNzYWdlOiAn6ZW/5bqm5ZyoMeWIsDbkuKrlrZfnrKYnfSwNCiAgICAgICAgXSwNCiAgICAgICAgc29ydE5vOiBbDQogICAgICAgICAge3JlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl5o6S5bqPJywgdHJpZ2dlcjogJ2NoYW5nZSd9LA0KICAgICAgICAgIHtwYXR0ZXJuOiAvXlswLTldXGQqJC8sIG1lc3NhZ2U6ICfmjpLluo/lrZfmrrXlj6rog73kuLroh6rnhLbmlbAnfSwNCiAgICAgICAgXQ0KICAgICAgfQ0KICAgIH0NCiAgfSwNCiAgY29tcHV0ZWQ6IHsNCiAgICAuLi5tYXBHZXR0ZXJzKFsNCiAgICAgICdwcmVzJw0KICAgIF0pLA0KICAgIGNhbkFkZDogZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIGhhc0F1dGgodGhpcy5wcmVzLCAnL3N5c3RlbS9tZW51L2NyZWF0ZScpDQogICAgfSwNCiAgICBjYW5EZWw6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBoYXNBdXRoKHRoaXMucHJlcywgJy9zeXN0ZW0vbWVudS9yZW1vdmUnKQ0KICAgIH0sDQogICAgY2FuVXBkYXRlOiBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gaGFzQXV0aCh0aGlzLnByZXMsICcvc3lzdGVtL21lbnUvdXBkYXRlJykNCiAgICB9LA0KICB9LA0KICBjcmVhdGVkKCkgew0KICAgIHRoaXMub3BlbkxvYWRpbmcoKTsNCiAgICB0aGlzLmZldGNoTWVudSgpDQogIH0sDQogIG1ldGhvZHM6IHsNCiAgICBmZXRjaE1lbnU6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGZldGNoTWVudSh0aGlzLnF1ZXJ5KS50aGVuKHJlcyA9PiB7DQogICAgICAgIHRoaXMubWVudURhdGEgPSByZXMuZGF0YQ0KICAgICAgICB0aGlzLm1lbnVEYXRhLmZvckVhY2goaXRlbSA9PiB7DQogICAgICAgICAgaWYgKGl0ZW0uY2hpbGRyZW4pew0KICAgICAgICAgICAgaXRlbS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkcmVuID0+IHsNCiAgICAgICAgICAgICAgY2hpbGRyZW4uY2hpbGRyZW4gPSBbXTsNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICB9KQ0KICAgICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTsNCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIHN1Ym1pdDogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy4kcmVmc1snZGF0YUZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsNCiAgICAgICAgaWYgKHZhbGlkKSB7DQogICAgICAgICAgaWYgKHRoaXMuaXNFZGl0Rm9ybSkgew0KICAgICAgICAgICAgdXBkYXRlTWVudSh0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkv67mlLnoj5zljZXmiJDlip8iKQ0KICAgICAgICAgICAgICB0aGlzLmZldGNoTWVudSgpDQogICAgICAgICAgICAgIHRoaXMuY2xvc2UoKQ0KICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+IHsNCiAgICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpDQogICAgICAgICAgICB9KQ0KICAgICAgICAgIH0gZWxzZSB7DQogICAgICAgICAgICBjcmVhdGVNZW51KHRoaXMuZm9ybSkudGhlbihyZXMgPT4gew0KICAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MoIua3u+WKoOiPnOWNleaIkOWKnyIpDQogICAgICAgICAgICAgIHRoaXMuZmV0Y2hNZW51KCkNCiAgICAgICAgICAgICAgdGhpcy5jbG9zZSgpDQogICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgICBjb25zb2xlLmVycm9yKGVycikNCiAgICAgICAgICAgIH0pDQogICAgICAgICAgfQ0KICAgICAgICB9IGVsc2Ugew0KICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhIScpDQogICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgIH0NCiAgICAgIH0pDQogICAgfSwNCiAgICBoYW5kbGVVcGRhdGU6IGZ1bmN0aW9uIChyb3cpIHsNCiAgICAgIHRoaXMuZm9ybSA9IHJvdw0KICAgICAgdGhpcy5iZWZvcmVTaG93KDEsICfkv67mlLnoj5zljZUnKQ0KICAgIH0sDQogICAgaGFuZGxlQ3JlYXRlOiBmdW5jdGlvbiAoaWQpIHsNCiAgICAgIHRoaXMuZm9ybSA9IHRoaXMuZ2V0Rm9ybU9iamVjdChpZCkNCiAgICAgIGxldCB0aXRsZSA9ICfmt7vliqDkuIvnuqcnDQogICAgICBpZiAoIWlkKSB7DQogICAgICAgIHRoaXMuZm9ybS5jb21wb25lbnQgPSAnTGF5b3V0Jw0KICAgICAgICB0aXRsZSA9ICfmt7vliqDoj5zljZUnDQogICAgICB9DQogICAgICB0aGlzLmJlZm9yZVNob3coMCwgdGl0bGUpDQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuJHJlZnNbJ2RhdGFGb3JtJ10uY2xlYXJWYWxpZGF0ZSgpDQogICAgICB9KQ0KICAgIH0sDQogICAgZ2V0Rm9ybU9iamVjdDogZnVuY3Rpb24gKGlkKSB7DQogICAgICByZXR1cm4gew0KICAgICAgICBwYXJlbnRJZDogaWQsDQogICAgICAgIHVybDogJycsDQogICAgICAgIGNvbXBvbmVudDogbnVsbCwNCiAgICAgICAgdHlwZTogJ21lbnUnLA0KICAgICAgICB0aXRsZTogJycsDQogICAgICAgIGxldmVsOiAnJywNCiAgICAgICAgc29ydE5vOiAnJywNCiAgICAgICAgaGlkZGVuOiAnJywNCiAgICAgICAgcmVtYXJrczogJycNCiAgICAgIH0NCiAgICB9LA0KICAgIGJlZm9yZVNob3c6IGZ1bmN0aW9uIChpc0VkaXRGb3JtLCB0aXRsZSkgew0KICAgICAgdGhpcy5pc0VkaXRGb3JtID0gaXNFZGl0Rm9ybQ0KICAgICAgdGhpcy50aXRsZSA9IHRpdGxlDQogICAgICB0aGlzLmRpYWxvZ0Zvcm1WaXNpYmxlID0gdHJ1ZQ0KICAgIH0sDQogICAgcmVtb3ZlOiBmdW5jdGlvbiAoc2NvcGUpIHsNCiAgICAgIGlmIChzY29wZS5yb3cubGV2ZWwgPT09IDEgJiYgc2NvcGUucm93LmNoaWxkcmVuKSB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoJ+ivpeiPnOWNleWtmOWcqOWtkOiPnOWNle+8jOivt+WFiOWIoOmZpOWtkOiPnOWNlScpDQogICAgICAgIHJldHVybjsNCiAgICAgIH0NCiAgICAgIHRoaXMuJGNvbmZpcm0oJ+atpOaTjeS9nOWwhuawuOS5heWIoOmZpOivpeiusOW9lSwg5piv5ZCm57un57utPycsICfmj5DnpLonLCB7DQogICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgY2FuY2VsQnV0dG9uVGV4dDogJ+WPlua2iCcsDQogICAgICAgIHR5cGU6ICd3YXJuaW5nJw0KICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgIHJlbW92ZU1lbnUoc2NvcGUucm93LmlkKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgdGhpcy5mZXRjaE1lbnUoKQ0KICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsDQogICAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZSwNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pDQogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpDQogICAgICAgIH0pDQogICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raI5Yig6ZmkJw0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIC8vIOaJk+W8gOWKoOi9veWxgg0KICAgIG9wZW5Mb2FkaW5nOiBmdW5jdGlvbiAoKSB7DQogICAgICB0aGlzLmxvYWRpbmcgPSB0aGlzLiRsb2FkaW5nKHsNCiAgICAgICAgbG9jazogdHJ1ZSwNCiAgICAgICAgdGV4dDogIuato+WcqOWKoOi9veS4rX4iLA0KICAgICAgICBzcGlubmVyOiAiZWwtaWNvbi1sb2FkaW5nIiwNCiAgICAgICAgYmFja2dyb3VuZDogInJnYmEoMCwgMCwgMCwgMC43KSINCiAgICAgIH0pOw0KICAgIH0sDQogICAgY2xvc2U6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMuZGlhbG9nRm9ybVZpc2libGUgPSBmYWxzZQ0KICAgICAgdGhpcy5mb3JtID0ge30NCiAgICB9LA0KICAgIC8vIOmAieaLqeWbvuaghw0KICAgIHNldEljb246IGZ1bmN0aW9uICh2YWwpIHsNCiAgICAgIHRoaXMuZm9ybS5pY29uID0gdmFsDQogICAgfSwNCiAgICBvcGVuSWNvbnNEaWFsb2c6IGZ1bmN0aW9uIChtb2RlbCkgew0KICAgICAgdGhpcy5pY29uc1Zpc2libGUgPSB0cnVlDQogICAgICB0aGlzLmN1cnJlbnRJY29uTW9kZWwgPSBtb2RlbA0KICAgIH0NCiAgfSwNCg0KfQ0K"},{"version":3,"sources":["menu.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAqMA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"menu.vue","sourceRoot":"src/views/system","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"app-container\">\r\n      <!-- 查询和其他操作 -->\r\n      <el-row>\r\n        <el-button size=\"small\" v-if=\"canAdd\" type=\"primary\" icon=\"el-icon-plus\"\r\n                   @click=\"handleCreate(0)\"\r\n        >添加\r\n        </el-button>\r\n      </el-row>\r\n      <el-table :data=\"menuData\" style=\"width: 100%\">\r\n        <el-table-column type=\"expand\">\r\n          <template slot-scope=\"scope\">\r\n            <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n              <el-table :data=\"scope.row.children\" :show-header=\"showHeader\" style=\"width: 100%\">\r\n\r\n                <el-table-column label width=\"60\" align=\"center\">\r\n                  <template slot-scope=\"scope_child\">\r\n                    <span>{{ scope_child.$index + 1 }}</span>\r\n                  </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column label width=\"150\" align=\"center\">\r\n                  <template slot-scope=\"scope_child\">\r\n                    <span>{{ scope_child.row.title }}</span>\r\n                  </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column label width=\"100\" align=\"center\">\r\n                  <template slot-scope=\"scope_child\">\r\n                    <el-tag :type=\"menuLevelType[scope_child.row.level]\">\r\n                      {{ menuLevelOptions[scope_child.row.level] }}\r\n                    </el-tag>\r\n                  </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column label width=\"100\" align=\"center\">\r\n                  <template slot-scope=\"scope_child\">\r\n                    <span v-if=\"scope_child.row.icon != null\">\r\n                         <i v-if=\"scope_child.row.icon.indexOf('el-') >-1\" :class=\"scope_child.row.icon\"></i>\r\n                          <svg-icon :icon-class=\"scope_child.row.icon\"/>\r\n                   </span>\r\n                  </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column label width=\"200\" align=\"center\">\r\n                  <template slot-scope=\"scope_child\">\r\n                    <span>{{ scope_child.row.url }}</span>\r\n                  </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column width=\"100\" align=\"center\">\r\n                  <template slot-scope=\"scope_child\">\r\n                    <el-tag :type=\"hiddenTypes[scope_child.row.hidden]\">\r\n                      {{ hiddenOptions[scope_child.row.hidden] }}\r\n                    </el-tag>\r\n                  </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column width=\"100\" align=\"center\">\r\n                  <template slot-scope=\"scope_child\">\r\n                    <el-tag type=\"warning\">{{ scope_child.row.sortNo }}</el-tag>\r\n                  </template>\r\n                </el-table-column>\r\n\r\n                <el-table-column align=\"center\" min-width=\"230\">\r\n                  <template slot-scope=\"scope_child\">\r\n                    <el-button v-if=\"canUpdate\" type=\"primary\" size=\"mini\"  @click=\"handleUpdate(scope_child.row)\">\r\n                      编辑\r\n                    </el-button>\r\n                    <el-button v-if=\"canDel\" size=\"mini\"  type=\"danger\" @click=\"remove(scope_child)\">删除</el-button>\r\n                  </template>\r\n                </el-table-column>\r\n              </el-table>\r\n            </el-form>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"序号\" width=\"60\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.$index + 1 }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"菜单名称\" width=\"150\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.title }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"菜单级别\" width=\"100\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag :type=\"menuLevelType[scope.row.level]\">\r\n              {{ menuLevelOptions[scope.row.level] }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"图标\" width=\"100\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n          <span v-if=\"scope.row.icon != null\">\r\n                         <i v-if=\"scope.row.icon.indexOf('el-') >-1\" :class=\"scope.row.icon\"></i>\r\n                          <svg-icon :icon-class=\"scope.row.icon\"/>\r\n                   </span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"路由\" width=\"200\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <span>{{ scope.row.url }}</span>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"是否显示\" width=\"100\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag :type=\"hiddenTypes[scope.row.hidden]\">\r\n              {{ hiddenOptions[scope.row.hidden] }}\r\n            </el-tag>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"排序\" width=\"100\" align=\"center\">\r\n          <template slot-scope=\"scope\">\r\n            <el-tag type=\"warning\">{{ scope.row.sortNo }}</el-tag>\r\n          </template>\r\n        </el-table-column>\r\n\r\n        <el-table-column label=\"操作\" align=\"center\" min-width=\"270\">\r\n          <template slot-scope=\"scope\">\r\n            <el-button v-if=\"canUpdate\" type=\"primary\" size=\"mini\"  @click=\"handleUpdate(scope.row)\">编辑</el-button>\r\n            <el-button type=\"warning\" size=\"mini\" v-if=\"canAdd&&scope.row.level === 0\"\r\n                       @click=\"handleCreate(scope.row.id)\">添加下级\r\n            </el-button>\r\n            <el-button v-if=\"canDel\" size=\"mini\"  type=\"danger\" @click=\"remove(scope)\">删除</el-button>\r\n          </template>\r\n        </el-table-column>\r\n      </el-table>\r\n    </div>\r\n\r\n\r\n    <el-dialog center :title=\"title\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form :rules=\"rules\" ref=\"dataForm\" :model=\"form\">\r\n        <el-form-item prop=\"url\" label=\"路由\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.url\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"component\" label=\"路由地址\" :label-width=\"formLabelWidth\">\r\n          <el-input v-if=\"form.parentId\" v-model=\"form.component\" autocomplete=\"off\"></el-input>\r\n          <el-input v-else disabled v-model=\"form.component\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"图标\" :label-width=\"formLabelWidth\" prop=\"icon\">\r\n          <el-input v-model=\"form.icon\" placeholder=\"请输入前图标名称\">\r\n            <el-button slot=\"append\" icon=\"el-icon-setting\" @click=\"openIconsDialog('prefix-icon')\">\r\n              选择\r\n            </el-button>\r\n          </el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"title\" label=\"菜单名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.title\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"title\" label=\"路由名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.name\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <!--        <el-form-item prop=\"type\" label=\"菜单类型\" :label-width=\"formLabelWidth\">\r\n                  <el-radio v-model=\"form.type\" label=\"menu\">菜单</el-radio>\r\n                  <el-radio v-model=\"form.type\" label=\"btn\">按钮</el-radio>\r\n                </el-form-item>-->\r\n        <el-form-item prop=\"hidden\" label=\"是否显示\" :label-width=\"formLabelWidth\">\r\n          <el-radio-group v-model=\"form.hidden\" size=\"small\">\r\n            <el-radio v-for=\"(item,index) in hiddenOptions\" :key=\"index\" :label=\"index\" border>{{ item }}</el-radio>\r\n          </el-radio-group>\r\n        </el-form-item>\r\n        <el-form-item label=\"菜单级别\" :label-width=\"formLabelWidth\" prop=\"level\">\r\n          <el-select v-model=\"form.level\" placeholder=\"请选择\">\r\n            <el-option\r\n              v-for=\"(item,index) in menuLevelOptions\"\r\n              :key=\"index\"\r\n              :label=\"item\"\r\n              :value=\"index\"\r\n            ></el-option>\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"排序\" prop=\"sortNo\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.sortNo\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.remarks\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submit\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n    <icons-dialog :visible.sync=\"iconsVisible\" :current=\"form.icon\" @select=\"setIcon\"/>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {fetchMenu, createMenu, removeMenu, updateMenu} from '@/api/system'\r\nimport IconsDialog from \"../../components/IconsDialog\";\r\nimport {mapGetters} from \"vuex\";\r\nimport {hasAuth} from \"@/utils/auth\";\r\n\r\nexport default {\r\n  components: {\r\n    IconsDialog\r\n  },\r\n  data() {\r\n    return {\r\n      showHeader: false, //是否显示表头\r\n      hiddenTypes: ['warning', 'success'],\r\n      hiddenOptions: ['否', '是'],\r\n      menuLevelType: ['success', 'danger', 'warning'],\r\n      menuLevelOptions: ['一级菜单', '二级菜单'],\r\n      isEditForm: 0,\r\n      title: null,\r\n      // 加载层信息\r\n      loading: [],\r\n      form: {},\r\n      dialogFormVisible: false,\r\n      iconsVisible: false,\r\n      formLabelWidth: '120px',\r\n      menuData: [],\r\n      rules: {\r\n        url: [\r\n          {required: true, message: '请输入url', trigger: 'change'}\r\n        ],\r\n        icon: [\r\n          {required: true, message: '请选择图标', trigger: 'change'}\r\n        ],\r\n        level: [\r\n          {required: true, message: '请选择菜单级别', trigger: 'change'}\r\n        ],\r\n        component: [\r\n          {required: true, message: '请输入路由地址', trigger: 'change'}\r\n        ],\r\n        hidden: [\r\n          {required: true, message: '请选择是否显示', trigger: 'change'}\r\n        ],\r\n        title: [\r\n          {required: true, message: '请输入菜单名称', trigger: 'change'},\r\n          {min: 1, max: 6, message: '长度在1到6个字符'},\r\n        ],\r\n        sortNo: [\r\n          {required: true, message: '请输入排序', trigger: 'change'},\r\n          {pattern: /^[0-9]\\d*$/, message: '排序字段只能为自然数'},\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed: {\r\n    ...mapGetters([\r\n      'pres'\r\n    ]),\r\n    canAdd: function () {\r\n      return hasAuth(this.pres, '/system/menu/create')\r\n    },\r\n    canDel: function () {\r\n      return hasAuth(this.pres, '/system/menu/remove')\r\n    },\r\n    canUpdate: function () {\r\n      return hasAuth(this.pres, '/system/menu/update')\r\n    },\r\n  },\r\n  created() {\r\n    this.openLoading();\r\n    this.fetchMenu()\r\n  },\r\n  methods: {\r\n    fetchMenu: function () {\r\n      fetchMenu(this.query).then(res => {\r\n        this.menuData = res.data\r\n        this.menuData.forEach(item => {\r\n          if (item.children){\r\n            item.children.forEach(children => {\r\n              children.children = [];\r\n            })\r\n          }\r\n        })\r\n        this.loading.close();\r\n      }).catch(err => {\r\n        console.error(err)\r\n      })\r\n    },\r\n    submit: function () {\r\n      this.$refs['dataForm'].validate((valid) => {\r\n        if (valid) {\r\n          if (this.isEditForm) {\r\n            updateMenu(this.form).then(res => {\r\n              this.$message.success(\"修改菜单成功\")\r\n              this.fetchMenu()\r\n              this.close()\r\n            }).catch(err => {\r\n              console.error(err)\r\n            })\r\n          } else {\r\n            createMenu(this.form).then(res => {\r\n              this.$message.success(\"添加菜单成功\")\r\n              this.fetchMenu()\r\n              this.close()\r\n            }).catch(err => {\r\n              console.error(err)\r\n            })\r\n          }\r\n        } else {\r\n          console.log('error submit!!')\r\n          return false\r\n        }\r\n      })\r\n    },\r\n    handleUpdate: function (row) {\r\n      this.form = row\r\n      this.beforeShow(1, '修改菜单')\r\n    },\r\n    handleCreate: function (id) {\r\n      this.form = this.getFormObject(id)\r\n      let title = '添加下级'\r\n      if (!id) {\r\n        this.form.component = 'Layout'\r\n        title = '添加菜单'\r\n      }\r\n      this.beforeShow(0, title)\r\n      this.$nextTick(() => {\r\n        this.$refs['dataForm'].clearValidate()\r\n      })\r\n    },\r\n    getFormObject: function (id) {\r\n      return {\r\n        parentId: id,\r\n        url: '',\r\n        component: null,\r\n        type: 'menu',\r\n        title: '',\r\n        level: '',\r\n        sortNo: '',\r\n        hidden: '',\r\n        remarks: ''\r\n      }\r\n    },\r\n    beforeShow: function (isEditForm, title) {\r\n      this.isEditForm = isEditForm\r\n      this.title = title\r\n      this.dialogFormVisible = true\r\n    },\r\n    remove: function (scope) {\r\n      if (scope.row.level === 1 && scope.row.children) {\r\n        this.$message.error('该菜单存在子菜单，请先删除子菜单')\r\n        return;\r\n      }\r\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        removeMenu(scope.row.id).then(res => {\r\n          this.fetchMenu()\r\n          this.$notify({\r\n            title: '成功',\r\n            message: res.message,\r\n            type: 'success'\r\n          })\r\n        }).catch(err => {\r\n          console.error(err)\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消删除'\r\n        })\r\n      })\r\n    },\r\n    // 打开加载层\r\n    openLoading: function () {\r\n      this.loading = this.$loading({\r\n        lock: true,\r\n        text: \"正在加载中~\",\r\n        spinner: \"el-icon-loading\",\r\n        background: \"rgba(0, 0, 0, 0.7)\"\r\n      });\r\n    },\r\n    close: function () {\r\n      this.dialogFormVisible = false\r\n      this.form = {}\r\n    },\r\n    // 选择图标\r\n    setIcon: function (val) {\r\n      this.form.icon = val\r\n    },\r\n    openIconsDialog: function (model) {\r\n      this.iconsVisible = true\r\n      this.currentIconModel = model\r\n    }\r\n  },\r\n\r\n}\r\n</script>\r\n"]}]}