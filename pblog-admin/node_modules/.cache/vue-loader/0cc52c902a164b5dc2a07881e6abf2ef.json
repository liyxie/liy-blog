{"remainingRequest":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\src\\views\\system\\api.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\src\\views\\system\\api.vue","mtime":1721286706018},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1721358892040},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1721358892834},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1721358892040},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1721358887250}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2ZldGNoTWVudSxmZXRjaEFwaSwgY3JlYXRlTWVudSwgcmVtb3ZlTWVudSwgdXBkYXRlTWVudX0gZnJvbSAnQC9hcGkvc3lzdGVtJw0KaW1wb3J0IEljb25zRGlhbG9nIGZyb20gIi4uLy4uL2NvbXBvbmVudHMvSWNvbnNEaWFsb2ciOw0KaW1wb3J0IHttYXBHZXR0ZXJzfSBmcm9tICJ2dWV4IjsNCmltcG9ydCB7aGFzQXV0aH0gZnJvbSAiQC91dGlscy9hdXRoIjsNCg0KZXhwb3J0IGRlZmF1bHQgew0KICBjb21wb25lbnRzOiB7DQogICAgSWNvbnNEaWFsb2cNCiAgfSwNCiAgZGF0YSgpIHsNCiAgICByZXR1cm4gew0KICAgICAga2V5d29yZDpudWxsLA0KICAgICAgYnV0dG9uUGFyZW50VWlkOltdLA0KICAgICAgc2hvd0hlYWRlcjogZmFsc2UsIC8v5piv5ZCm5pi+56S66KGo5aS0DQogICAgICBoaWRkZW5UeXBlczogWyd3YXJuaW5nJywgJ3N1Y2Nlc3MnXSwNCiAgICAgIGhpZGRlbk9wdGlvbnM6IFsn5ZCmJywgJ+aYryddLA0KICAgICAgbWVudVR5cGVzOiBbJ3N1Y2Nlc3MnLCAnd2FybmluZyddLA0KICAgICAgbWVudVR5cGVPcHRpb25zOiBbJ+iPnOWNlScsICfmjInpkq4nXSwNCiAgICAgIG1lbnVMZXZlbFR5cGU6IFsnc3VjY2VzcycsICdkYW5nZXInLCAnaW5mbyddLA0KICAgICAgbWVudUxldmVsT3B0aW9uczogWyfkuIDnuqfoj5zljZUnLCAn5LqM57qn6I+c5Y2VJywgJ+S4iee6p+iPnOWNlSddLA0KICAgICAgaXNFZGl0Rm9ybTogMCwNCiAgICAgIHRpdGxlOiBudWxsLA0KICAgICAgZm9ybToge30sDQogICAgICBxdWVyeTp7DQogICAgICAgIGlkOm51bGwNCiAgICAgIH0sDQogICAgICAvLyDliqDovb3lsYLkv6Hmga8NCiAgICAgIGxvYWRpbmc6IFtdLA0KICAgICAgb3B0aW9uczpbXSwNCiAgICAgIGRpYWxvZ0Zvcm1WaXNpYmxlOiBmYWxzZSwNCiAgICAgIHNob3dTZWFyY2g6IHRydWUsDQogICAgICBmb3JtTGFiZWxXaWR0aDogJzEyMHB4JywNCiAgICAgIG1lbnVEYXRhOiBbXSwNCiAgICAgIHJ1bGVzOiB7DQogICAgICAgIHVybDogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpXVybCcsIHRyaWdnZXI6ICdjaGFuZ2UnfQ0KICAgICAgICBdLA0KICAgICAgICBpY29uOiBbDQogICAgICAgICAge3JlcXVpcmVkOiBmYWxzZSwgbWVzc2FnZTogJ+ivt+mAieaLqeWbvuaghycsIHRyaWdnZXI6ICdjaGFuZ2UnfQ0KICAgICAgICBdLA0KICAgICAgICBsZXZlbDogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeiPnOWNlee6p+WIqycsIHRyaWdnZXI6ICdjaGFuZ2UnfQ0KICAgICAgICBdLA0KICAgICAgICBjb21wb25lbnQ6IFsNCiAgICAgICAgICB7cmVxdWlyZWQ6IGZhbHNlLCBtZXNzYWdlOiAn6K+36L6T5YWl6Lev55Sx5Zyw5Z2AJywgdHJpZ2dlcjogJ2NoYW5nZSd9DQogICAgICAgIF0sDQogICAgICAgIGhpZGRlbjogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+mAieaLqeaYr+WQpuaYvuekuicsIHRyaWdnZXI6ICdjaGFuZ2UnfQ0KICAgICAgICBdLA0KICAgICAgICB0aXRsZTogWw0KICAgICAgICAgIHtyZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeiPnOWNleWQjeensCcsIHRyaWdnZXI6ICdjaGFuZ2UnfQ0KICAgICAgICBdDQogICAgICB9DQogICAgfQ0KICB9LA0KICBjb21wdXRlZDp7DQogICAgLi4ubWFwR2V0dGVycyhbDQogICAgICAncHJlcycNCiAgICBdKSwNCiAgICBjYW5BZGQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHJldHVybiBoYXNBdXRoKHRoaXMucHJlcywgJy9zeXN0ZW0vbWVudS9jcmVhdGUnKQ0KICAgIH0sDQogICAgY2FuRGVsOiBmdW5jdGlvbiAoKSB7DQogICAgICByZXR1cm4gaGFzQXV0aCh0aGlzLnByZXMsICcvc3lzdGVtL21lbnUvcmVtb3ZlJykNCiAgICB9LA0KICAgIGNhblVwZGF0ZTogZnVuY3Rpb24gKCkgew0KICAgICAgcmV0dXJuIGhhc0F1dGgodGhpcy5wcmVzLCAnL3N5c3RlbS9tZW51L3VwZGF0ZScpDQogICAgfSwNCiAgfSwNCiAgY3JlYXRlZCgpIHsNCiAgICB0aGlzLm9wZW5Mb2FkaW5nKCk7DQogICAgdGhpcy5mZXRjaEFwaSgpDQogICAgZmV0Y2hNZW51KCkudGhlbihyZXMgPT57DQogICAgICByZXMuZGF0YS5mb3JFYWNoKGl0ZW0gPT57DQogICAgICAgIGxldCBwYXJlbnQgPSB7fQ0KICAgICAgICBwYXJlbnQubGFiZWwgPSBpdGVtLnRpdGxlOw0KICAgICAgICBwYXJlbnQudmFsdWUgPSBpdGVtLmlkOw0KICAgICAgICBsZXQgY2hpbGRMaXN0ID0gW10NCiAgICAgICAgaXRlbS5jaGlsZHJlbi5mb3JFYWNoKGNoaWxkSXRlbSA9PnsNCiAgICAgICAgICBsZXQgY2hpbGQgPSB7fQ0KICAgICAgICAgIGNoaWxkLmxhYmVsID0gY2hpbGRJdGVtLnRpdGxlOw0KICAgICAgICAgIGNoaWxkLnZhbHVlID0gY2hpbGRJdGVtLmlkOw0KICAgICAgICAgIGNoaWxkTGlzdC5wdXNoKGNoaWxkKQ0KICAgICAgICB9KQ0KICAgICAgICBwYXJlbnQuY2hpbGRyZW4gPSBjaGlsZExpc3QNCiAgICAgICAgdGhpcy5vcHRpb25zLnB1c2gocGFyZW50KQ0KICAgICAgfSkNCiAgICB9KQ0KICB9LA0KICBtZXRob2RzOiB7DQogICAgZmV0Y2hBcGk6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGZldGNoQXBpKHRoaXMucXVlcnkpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgdGhpcy5tZW51RGF0YT1yZXMuZGF0YQ0KICAgICAgICB0aGlzLmxvYWRpbmcuY2xvc2UoKTsNCiAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZUZpbmQ6IGZ1bmN0aW9uICgpIHsNCiAgICAgIGlmICh0aGlzLmtleXdvcmQgPT0gbnVsbCl7DQogICAgICAgIHRoaXMuJG1lc3NhZ2UuZXJyb3IoIuivt+mAieaLqeiPnOWNlSIpDQogICAgICAgIHJldHVybiBmYWxzZQ0KICAgICAgfQ0KICAgICAgdGhpcy5xdWVyeS5pZCA9IHRoaXMua2V5d29yZFsxXQ0KICAgICAgdGhpcy5mZXRjaEFwaSgpOw0KICAgIH0sDQogICBzdWJtaXQ6IGZ1bmN0aW9uICgpew0KICAgICB0aGlzLiRyZWZzWydkYXRhRm9ybSddLnZhbGlkYXRlKCh2YWxpZCkgPT4gew0KICAgICAgIGlmICh2YWxpZCkgew0KICAgICAgICAgdGhpcy5mb3JtLnBhcmVudElkPXRoaXMuYnV0dG9uUGFyZW50VWlkWzFdDQogICAgICAgICBpZiAodGhpcy5pc0VkaXRGb3JtKXsNCiAgICAgICAgICAgdXBkYXRlTWVudSh0aGlzLmZvcm0pLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgICB0aGlzLiRtZXNzYWdlLnN1Y2Nlc3MocmVzLm1lc3NhZ2UpDQogICAgICAgICAgICAgdGhpcy5mZXRjaEFwaSgpDQogICAgICAgICAgICAgdGhpcy5jbG9zZSgpDQogICAgICAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpDQogICAgICAgICAgIH0pDQogICAgICAgICB9ZWxzZSB7DQogICAgICAgICAgIGNyZWF0ZU1lbnUodGhpcy5mb3JtKS50aGVuKHJlcyA9PiB7DQogICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKHJlcy5tZXNzYWdlKQ0KICAgICAgICAgICAgIHRoaXMuZmV0Y2hBcGkoKQ0KICAgICAgICAgICAgIHRoaXMuY2xvc2UoKQ0KICAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKQ0KICAgICAgICAgICB9KQ0KICAgICAgICAgfQ0KICAgICAgIH0gZWxzZSB7DQogICAgICAgICBjb25zb2xlLmxvZygnZXJyb3Igc3VibWl0ISEnKQ0KICAgICAgICAgcmV0dXJuIGZhbHNlDQogICAgICAgfQ0KICAgICB9KQ0KICAgfSwNCiAgICByZW1vdmU6IGZ1bmN0aW9uIChzY29wZSkgew0KICAgICAgaWYgKHNjb3BlLnJvdy5jaGlsZHJlbikgew0KICAgICAgICB0aGlzLiRtZXNzYWdlLmVycm9yKCfor6Xoj5zljZXlrZjlnKjlrZDoj5zljZXvvIzor7flhYjliKDpmaTlrZDoj5zljZUnKQ0KICAgICAgICByZXR1cm47DQogICAgICB9DQogICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XorrDlvZUsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICBjb25maXJtQnV0dG9uVGV4dDogJ+ehruWumicsDQogICAgICAgIGNhbmNlbEJ1dHRvblRleHQ6ICflj5bmtognLA0KICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgIH0pLnRoZW4oKCkgPT4gew0KICAgICAgICByZW1vdmVNZW51KHNjb3BlLnJvdy5pZCkudGhlbihyZXMgPT4gew0KICAgICAgICAgIHRoaXMuZmV0Y2hBcGkoKQ0KICAgICAgICAgIHRoaXMuJG5vdGlmeSh7DQogICAgICAgICAgICB0aXRsZTogJ+aIkOWKnycsDQogICAgICAgICAgICBtZXNzYWdlOiByZXMubWVzc2FnZSwNCiAgICAgICAgICAgIHR5cGU6ICdzdWNjZXNzJw0KICAgICAgICAgIH0pDQogICAgICAgIH0pLmNhdGNoKGVyciA9PiB7DQogICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpDQogICAgICAgIH0pDQogICAgICB9KS5jYXRjaCgoKSA9PiB7DQogICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgIHR5cGU6ICdpbmZvJywNCiAgICAgICAgICBtZXNzYWdlOiAn5Y+W5raI5Yig6ZmkJw0KICAgICAgICB9KQ0KICAgICAgfSkNCiAgICB9LA0KICAgIGhhbmRsZVVwZGF0ZTogZnVuY3Rpb24gKHBhcmVudFJvdyxyb3cpIHsNCiAgICAgIC8vIOiuvue9rue6p+iBlOeahOeItuiPnOWNleWQjQ0KICAgICAgbGV0IHBhcmVudFVpZCA9IFtdDQogICAgICBwYXJlbnRVaWQucHVzaChwYXJlbnRSb3cucGFyZW50SWQpDQogICAgICBwYXJlbnRVaWQucHVzaChwYXJlbnRSb3cuaWQpDQogICAgICB0aGlzLmJ1dHRvblBhcmVudFVpZCA9IHBhcmVudFVpZA0KICAgICAgdGhpcy5mb3JtID0gcm93DQogICAgICB0aGlzLmJlZm9yZVNob3coJ+S/ruaUueaOpeWPoycsMSkNCiAgICB9LA0KICAgIGhhbmRsZUNyZWF0ZTogZnVuY3Rpb24gKGlkKSB7DQogICAgICB0aGlzLmZvcm09dGhpcy5nZXRGb3JtT2JqZWN0KCkNCiAgICAgIHRoaXMuYnV0dG9uUGFyZW50VWlkPVtdDQogICAgICB0aGlzLmJlZm9yZVNob3coJ+a3u+WKoOaOpeWPoycsMCApDQogICAgICB0aGlzLiRuZXh0VGljaygoKSA9PiB7DQogICAgICAgIHRoaXMuJHJlZnNbJ2RhdGFGb3JtJ10uY2xlYXJWYWxpZGF0ZSgpDQogICAgICB9KQ0KICAgIH0sDQogICAgYmVmb3JlU2hvdzogZnVuY3Rpb24gKHRpdGxlLGlzRWRpdEZvcm0pIHsNCiAgICAgIHRoaXMudGl0bGUgPSB0aXRsZQ0KICAgICAgdGhpcy5pc0VkaXRGb3JtID0gaXNFZGl0Rm9ybQ0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IHRydWUNCiAgICB9LA0KICAgIGdldEZvcm1PYmplY3Q6IGZ1bmN0aW9uICgpew0KICAgICAgcmV0dXJuIHsNCiAgICAgICAgcGFyZW50SWQ6IG51bGwsDQogICAgICAgIHVybDogJycsDQogICAgICAgIGNvbXBvbmVudDogJycsDQogICAgICAgIHR5cGU6ICdidG4nLA0KICAgICAgICB0aXRsZTogJycsDQogICAgICAgIGxldmVsOiAyLA0KICAgICAgICBzb3J0Tm86ICcnLA0KICAgICAgICBoaWRkZW46IDAsDQogICAgICAgIHJlbWFya3M6ICcnDQogICAgICB9DQogICAgfSwNCiAgICBjbG9zZTogZnVuY3Rpb24gKCkgew0KICAgICAgdGhpcy5kaWFsb2dGb3JtVmlzaWJsZSA9IGZhbHNlDQogICAgICB0aGlzLmZvcm0gPSB7fQ0KICAgIH0sDQogICAgLy8g5omT5byA5Yqg6L295bGCDQogICAgb3BlbkxvYWRpbmc6IGZ1bmN0aW9uICgpIHsNCiAgICAgIHRoaXMubG9hZGluZyA9IHRoaXMuJGxvYWRpbmcoew0KICAgICAgICBsb2NrOiB0cnVlLA0KICAgICAgICB0ZXh0OiAi5q2j5Zyo5Yqg6L295LitfiIsDQogICAgICAgIHNwaW5uZXI6ICJlbC1pY29uLWxvYWRpbmciLA0KICAgICAgICBiYWNrZ3JvdW5kOiAicmdiYSgwLCAwLCAwLCAwLjcpIg0KICAgICAgfSk7DQogICAgfQ0KICB9LA0KDQp9DQo="},{"version":3,"sources":["api.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAuMA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"api.vue","sourceRoot":"src/views/system","sourcesContent":["<template>\r\n  <div>\r\n    <div class=\"app-container\">\r\n      <!-- 查询和其他操作 -->\r\n      <el-form v-show=\"showSearch\" :inline=\"true\" ref=\"form\" label-width=\"68px\">\r\n        <el-form-item label=\"菜单名称\">\r\n          <el-cascader\r\n            size=\"small\"\r\n            :options=\"options\"\r\n            placeholder=\"请选择菜单名\"\r\n            v-model=\"keyword\"\r\n            :props=\"{ checkStrictly: false }\"\r\n            @change=\"handleFind\"\r\n            clearable></el-cascader>\r\n        </el-form-item>\r\n        <el-form-item>\r\n          <el-button  v-if=\"canAdd\" type=\"primary\" icon=\"el-icon-search\" size=\"small\" @click=\"handleCreate\">新增</el-button>\r\n        </el-form-item>\r\n      </el-form>\r\n\r\n      <div>\r\n        <el-table  :data=\"menuData\" style=\"width: 100%\">\r\n          <el-table-column type=\"expand\">\r\n            <template slot-scope=\"scope\">\r\n              <el-form label-position=\"left\" inline class=\"demo-table-expand\">\r\n                <el-table :data=\"scope.row.children\" :show-header=\"showHeader\" style=\"width: 100%\">\r\n\r\n                  <el-table-column label width=\"60\" align=\"center\">\r\n                    <template slot-scope=\"scope_child\">\r\n                      <span>{{ scope_child.$index + 1 }}</span>\r\n                    </template>\r\n                  </el-table-column>\r\n\r\n                  <el-table-column label width=\"150\" align=\"center\">\r\n                    <template slot-scope=\"scope_child\">\r\n                      <span>{{ scope_child.row.title }}</span>\r\n                    </template>\r\n                  </el-table-column>\r\n\r\n                  <el-table-column label width=\"100\" align=\"center\">\r\n                    <template slot-scope=\"scope_child\">\r\n                      <el-tag :type=\"menuLevelType[scope_child.row.level]\">\r\n                        {{ menuLevelOptions[scope_child.row.level] }}\r\n                      </el-tag>\r\n                    </template>\r\n                  </el-table-column>\r\n\r\n                  <el-table-column label=\"菜单类型\" width=\"100\" align=\"center\">\r\n                    <template slot-scope=\"scope_child\">\r\n                      <el-tag :type=\"menuTypes[scope_child.row.type === 'menu'?0:1]\">\r\n                        {{ menuTypeOptions[scope_child.row.type === 'menu' ? 0 : 1] }}\r\n                      </el-tag>\r\n                    </template>\r\n                  </el-table-column>\r\n\r\n                  <el-table-column label width=\"100\" align=\"center\">\r\n                    <template slot-scope=\"scope_child\">\r\n                    <span v-if=\"scope_child.row.icon != null\">\r\n                       <i v-if=\"scope_child.row.icon.indexOf('el-') >-1\" :class=\"scope_child.row.icon\"></i>\r\n                        <svg-icon :icon-class=\"scope_child.row.icon\"/>\r\n                 </span>\r\n                    </template>\r\n                  </el-table-column>\r\n\r\n                  <el-table-column label width=\"200\" align=\"center\">\r\n                    <template slot-scope=\"scope_child\">\r\n                      <span>{{ scope_child.row.url }}</span>\r\n                    </template>\r\n                  </el-table-column>\r\n\r\n                  <el-table-column width=\"100\" align=\"center\">\r\n                    <template slot-scope=\"scope_child\">\r\n                      <el-tag :type=\"hiddenTypes[scope_child.row.hidden]\">\r\n                        {{ hiddenOptions[scope_child.row.hidden] }}\r\n                      </el-tag>\r\n                    </template>\r\n                  </el-table-column>\r\n\r\n                  <el-table-column width=\"100\" align=\"center\">\r\n                    <template slot-scope=\"scope_child\">\r\n                      <el-tag type=\"warning\">{{ scope_child.row.sortNo }}</el-tag>\r\n                    </template>\r\n                  </el-table-column>\r\n\r\n                  <el-table-column align=\"center\" min-width=\"230\">\r\n                    <template slot-scope=\"scope_child\">\r\n                      <el-button v-if=\"canUpdate\" type=\"primary\" size=\"mini\"  @click=\"handleUpdate(scope.row,scope_child.row)\">编辑</el-button>\r\n                      <el-button v-if=\"canDel\" size=\"mini\"  type=\"danger\" @click=\"remove(scope_child)\">删除</el-button>\r\n                    </template>\r\n                  </el-table-column>\r\n                </el-table>\r\n              </el-form>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"序号\" width=\"60\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.$index + 1 }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"菜单名称\" width=\"150\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.title }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"菜单级别\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag :type=\"menuLevelType[scope.row.level]\">\r\n                {{ menuLevelOptions[scope.row.level] }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"菜单类型\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag :type=\"menuTypes[scope.row.type === 'menu'?0:1]\">\r\n                {{ menuTypeOptions[scope.row.type === 'menu' ? 0 : 1] }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"图标\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n            <span v-if=\"scope.row.icon != null\">\r\n                 <i v-if=\"scope.row.icon.indexOf('el-') >-1\" :class=\"scope.row.icon\"></i>\r\n                 <svg-icon :icon-class=\"scope.row.icon\"/>\r\n            </span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"路由\" width=\"200\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <span>{{ scope.row.url }}</span>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"是否显示\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag :type=\"hiddenTypes[scope.row.hidden]\">\r\n                {{ hiddenOptions[scope.row.hidden] }}\r\n              </el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"排序\" width=\"100\" align=\"center\">\r\n            <template slot-scope=\"scope\">\r\n              <el-tag type=\"warning\">{{ scope.row.sortNo }}</el-tag>\r\n            </template>\r\n          </el-table-column>\r\n\r\n          <el-table-column label=\"操作\" align=\"center\"  min-width=\"270\">\r\n            <template slot-scope=\"scope\">\r\n\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </div>\r\n    </div>\r\n\r\n\r\n    <el-dialog center :title=\"title\" :visible.sync=\"dialogFormVisible\">\r\n      <el-form :rules=\"rules\" ref=\"dataForm\" :model=\"form\">\r\n        <el-form-item prop=\"url\" label=\"路由\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.url\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item prop=\"title\" label=\"接口名称\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.title\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <!-- 用于接口 -->\r\n        <el-form-item\r\n          prop=\"parentId\"\r\n          label=\"父菜单名\"\r\n          :label-width=\"formLabelWidth\"\r\n        >\r\n          <el-cascader\r\n            :options=\"options\"\r\n            placeholder=\"请选择父菜单\"\r\n            v-model=\"buttonParentUid\"\r\n            filterable\r\n            :props=\"{ checkStrictly: false }\"\r\n            clearable></el-cascader>\r\n        </el-form-item>\r\n        <el-form-item label=\"排序\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.sortNo\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n        <el-form-item label=\"备注\" :label-width=\"formLabelWidth\">\r\n          <el-input v-model=\"form.remarks\" autocomplete=\"off\"></el-input>\r\n        </el-form-item>\r\n      </el-form>\r\n      <div slot=\"footer\" class=\"dialog-footer\">\r\n        <el-button @click=\"dialogFormVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"submit\">确 定</el-button>\r\n      </div>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n<script>\r\nimport {fetchMenu,fetchApi, createMenu, removeMenu, updateMenu} from '@/api/system'\r\nimport IconsDialog from \"../../components/IconsDialog\";\r\nimport {mapGetters} from \"vuex\";\r\nimport {hasAuth} from \"@/utils/auth\";\r\n\r\nexport default {\r\n  components: {\r\n    IconsDialog\r\n  },\r\n  data() {\r\n    return {\r\n      keyword:null,\r\n      buttonParentUid:[],\r\n      showHeader: false, //是否显示表头\r\n      hiddenTypes: ['warning', 'success'],\r\n      hiddenOptions: ['否', '是'],\r\n      menuTypes: ['success', 'warning'],\r\n      menuTypeOptions: ['菜单', '按钮'],\r\n      menuLevelType: ['success', 'danger', 'info'],\r\n      menuLevelOptions: ['一级菜单', '二级菜单', '三级菜单'],\r\n      isEditForm: 0,\r\n      title: null,\r\n      form: {},\r\n      query:{\r\n        id:null\r\n      },\r\n      // 加载层信息\r\n      loading: [],\r\n      options:[],\r\n      dialogFormVisible: false,\r\n      showSearch: true,\r\n      formLabelWidth: '120px',\r\n      menuData: [],\r\n      rules: {\r\n        url: [\r\n          {required: true, message: '请输入url', trigger: 'change'}\r\n        ],\r\n        icon: [\r\n          {required: false, message: '请选择图标', trigger: 'change'}\r\n        ],\r\n        level: [\r\n          {required: true, message: '请选择菜单级别', trigger: 'change'}\r\n        ],\r\n        component: [\r\n          {required: false, message: '请输入路由地址', trigger: 'change'}\r\n        ],\r\n        hidden: [\r\n          {required: true, message: '请选择是否显示', trigger: 'change'}\r\n        ],\r\n        title: [\r\n          {required: true, message: '请输入菜单名称', trigger: 'change'}\r\n        ]\r\n      }\r\n    }\r\n  },\r\n  computed:{\r\n    ...mapGetters([\r\n      'pres'\r\n    ]),\r\n    canAdd: function () {\r\n      return hasAuth(this.pres, '/system/menu/create')\r\n    },\r\n    canDel: function () {\r\n      return hasAuth(this.pres, '/system/menu/remove')\r\n    },\r\n    canUpdate: function () {\r\n      return hasAuth(this.pres, '/system/menu/update')\r\n    },\r\n  },\r\n  created() {\r\n    this.openLoading();\r\n    this.fetchApi()\r\n    fetchMenu().then(res =>{\r\n      res.data.forEach(item =>{\r\n        let parent = {}\r\n        parent.label = item.title;\r\n        parent.value = item.id;\r\n        let childList = []\r\n        item.children.forEach(childItem =>{\r\n          let child = {}\r\n          child.label = childItem.title;\r\n          child.value = childItem.id;\r\n          childList.push(child)\r\n        })\r\n        parent.children = childList\r\n        this.options.push(parent)\r\n      })\r\n    })\r\n  },\r\n  methods: {\r\n    fetchApi: function () {\r\n      fetchApi(this.query).then(res => {\r\n        this.menuData=res.data\r\n        this.loading.close();\r\n      }).catch(err => {\r\n        console.error(err)\r\n      })\r\n    },\r\n    handleFind: function () {\r\n      if (this.keyword == null){\r\n        this.$message.error(\"请选择菜单\")\r\n        return false\r\n      }\r\n      this.query.id = this.keyword[1]\r\n      this.fetchApi();\r\n    },\r\n   submit: function (){\r\n     this.$refs['dataForm'].validate((valid) => {\r\n       if (valid) {\r\n         this.form.parentId=this.buttonParentUid[1]\r\n         if (this.isEditForm){\r\n           updateMenu(this.form).then(res => {\r\n             this.$message.success(res.message)\r\n             this.fetchApi()\r\n             this.close()\r\n           }).catch(err => {\r\n             console.error(err)\r\n           })\r\n         }else {\r\n           createMenu(this.form).then(res => {\r\n             this.$message.success(res.message)\r\n             this.fetchApi()\r\n             this.close()\r\n           }).catch(err => {\r\n             console.error(err)\r\n           })\r\n         }\r\n       } else {\r\n         console.log('error submit!!')\r\n         return false\r\n       }\r\n     })\r\n   },\r\n    remove: function (scope) {\r\n      if (scope.row.children) {\r\n        this.$message.error('该菜单存在子菜单，请先删除子菜单')\r\n        return;\r\n      }\r\n      this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning'\r\n      }).then(() => {\r\n        removeMenu(scope.row.id).then(res => {\r\n          this.fetchApi()\r\n          this.$notify({\r\n            title: '成功',\r\n            message: res.message,\r\n            type: 'success'\r\n          })\r\n        }).catch(err => {\r\n          console.error(err)\r\n        })\r\n      }).catch(() => {\r\n        this.$message({\r\n          type: 'info',\r\n          message: '取消删除'\r\n        })\r\n      })\r\n    },\r\n    handleUpdate: function (parentRow,row) {\r\n      // 设置级联的父菜单名\r\n      let parentUid = []\r\n      parentUid.push(parentRow.parentId)\r\n      parentUid.push(parentRow.id)\r\n      this.buttonParentUid = parentUid\r\n      this.form = row\r\n      this.beforeShow('修改接口',1)\r\n    },\r\n    handleCreate: function (id) {\r\n      this.form=this.getFormObject()\r\n      this.buttonParentUid=[]\r\n      this.beforeShow('添加接口',0 )\r\n      this.$nextTick(() => {\r\n        this.$refs['dataForm'].clearValidate()\r\n      })\r\n    },\r\n    beforeShow: function (title,isEditForm) {\r\n      this.title = title\r\n      this.isEditForm = isEditForm\r\n      this.dialogFormVisible = true\r\n    },\r\n    getFormObject: function (){\r\n      return {\r\n        parentId: null,\r\n        url: '',\r\n        component: '',\r\n        type: 'btn',\r\n        title: '',\r\n        level: 2,\r\n        sortNo: '',\r\n        hidden: 0,\r\n        remarks: ''\r\n      }\r\n    },\r\n    close: function () {\r\n      this.dialogFormVisible = false\r\n      this.form = {}\r\n    },\r\n    // 打开加载层\r\n    openLoading: function () {\r\n      this.loading = this.$loading({\r\n        lock: true,\r\n        text: \"正在加载中~\",\r\n        spinner: \"el-icon-loading\",\r\n        background: \"rgba(0, 0, 0, 0.7)\"\r\n      });\r\n    }\r\n  },\r\n\r\n}\r\n</script>\r\n"]}]}