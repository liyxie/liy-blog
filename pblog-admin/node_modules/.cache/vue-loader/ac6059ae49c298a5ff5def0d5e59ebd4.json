{"remainingRequest":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\src\\views\\system\\role.vue?vue&type=script&lang=js&","dependencies":[{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\src\\views\\system\\role.vue","mtime":1721286706020},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1721358892040},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\babel-loader\\lib\\index.js","mtime":1721358892834},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1721358892040},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-admin\\node_modules\\vue-loader\\lib\\index.js","mtime":1721358887250}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:Ly8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KLy8KDQppbXBvcnQge2ZldGNoUm9sZSxmZXRjaE1lbnUscXVlcnlSb2xlSWQsdXBkYXRlUm9sZSxjcmVhdGVSb2xlLHJlbW92ZVJvbGV9IGZyb20gJ0AvYXBpL3N5c3RlbScNCmltcG9ydCB7cGFyc2VUaW1lfSBmcm9tICdAL3V0aWxzJw0KaW1wb3J0IFNjcm9sbFBhbmUgZnJvbSAiQC9sYXlvdXQvY29tcG9uZW50cy9UYWdzVmlldy9TY3JvbGxQYW5lIjsNCmltcG9ydCB7bWFwR2V0dGVyc30gZnJvbSAidnVleCI7DQppbXBvcnQge2hhc0F1dGh9IGZyb20gIkAvdXRpbHMvYXV0aCI7DQogIGV4cG9ydCBkZWZhdWx0IHsNCiAgICBjb21wb25lbnRzOiB7U2Nyb2xsUGFuZX0sDQogICAgZGF0YSgpIHsNCiAgICAgIHJldHVybiB7DQogICAgICAgIGNoZWNrZWRUcmVlOltdLA0KICAgICAgICBtdWx0aXBsZVNlbGVjdGlvbjpbXSwNCiAgICAgICAgZGVmYXVsdFByb3BzOiB7DQogICAgICAgICAgY2hpbGRyZW46ICdjaGlsZHJlbicsDQogICAgICAgICAgbGFiZWw6ICd0aXRsZScNCiAgICAgICAgfSwNCiAgICAgICAgaXNFZGl0Rm9ybTowLA0KICAgICAgICBkaWFsb2dWaXNpYmxlOiBmYWxzZSwNCiAgICAgICAgc2hvd1NlYXJjaDogdHJ1ZSwNCiAgICAgICAgdGl0bGU6IG51bGwsDQogICAgICAgIHRvdGFsOiAwLA0KICAgICAgICBwYXJhbXM6ew0KICAgICAgICAgIHBhZ2VObzoxLA0KICAgICAgICAgIHBhZ2VTaXplOjEwLA0KICAgICAgICAgIG5hbWU6bnVsbA0KICAgICAgICB9LA0KICAgICAgICBmb3JtOnt9LA0KICAgICAgICBtZW51RGF0YTpbXSwNCiAgICAgICAgcm9sZURhdGE6IFtdLA0KICAgICAgICAvLyDliqDovb3lsYLkv6Hmga8NCiAgICAgICAgbG9hZGluZzogW10sDQogICAgICAgIHJ1bGVzOiB7DQogICAgICAgICAgY29kZTogWw0KICAgICAgICAgICAgeyByZXF1aXJlZDogdHJ1ZSwgbWVzc2FnZTogJ+ivt+i+k+WFpeinkuiJsue8lueggScsIHRyaWdnZXI6ICdjaGFuZ2UnIH0sDQogICAgICAgICAgXSwNCiAgICAgICAgICBuYW1lOiBbDQogICAgICAgICAgICB7IHJlcXVpcmVkOiB0cnVlLCBtZXNzYWdlOiAn6K+36L6T5YWl6KeS6Imy5ZCN56ewJywgdHJpZ2dlcjogJ2NoYW5nZScgfSwNCiAgICAgICAgICBdDQogICAgICAgIH0NCiAgICAgIH0NCiAgICB9LA0KICAgIGNvbXB1dGVkOnsNCiAgICAgIC4uLm1hcEdldHRlcnMoWw0KICAgICAgICAncHJlcycNCiAgICAgIF0pLA0KICAgICAgY2FuQWRkOmZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gaGFzQXV0aCh0aGlzLnByZXMsICcvc3lzdGVtL3JvbGUvY3JlYXRlJykNCiAgICAgIH0sDQogICAgICBjYW5EZWw6IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gaGFzQXV0aCh0aGlzLnByZXMsICcvc3lzdGVtL3JvbGUvcmVtb3ZlJykNCiAgICAgIH0sDQogICAgICBjYW5VcGRhdGU6IGZ1bmN0aW9uKCkgew0KICAgICAgICByZXR1cm4gaGFzQXV0aCh0aGlzLnByZXMsICcvc3lzdGVtL3JvbGUvdXBkYXRlJykNCiAgICAgIH0sDQogICAgfSwNCiAgICBjcmVhdGVkKCl7DQogICAgICB0aGlzLm9wZW5Mb2FkaW5nKCk7DQogICAgICB0aGlzLmZldGNoUm9sZSgpDQogICAgICBmZXRjaE1lbnUoKS50aGVuKHJlcyA9PnsNCiAgICAgICAgdGhpcy5tZW51RGF0YSA9IHJlcy5kYXRhDQogICAgICB9KS5jYXRjaChlcnIgPT57DQogICAgICAgIGNvbnNvbGUubG9nKGVycikNCiAgICAgIH0pDQogICAgfSwNCiAgICBtZXRob2RzOiB7DQogICAgICBmZXRjaFJvbGU6IGZ1bmN0aW9uICgpew0KICAgICAgICBmZXRjaFJvbGUodGhpcy5wYXJhbXMpLnRoZW4ocmVzID0+ew0KICAgICAgICAgIHRoaXMucm9sZURhdGEgPSByZXMuZGF0YS5yZWNvcmRzDQogICAgICAgICAgdGhpcy50b3RhbCA9IHJlcy5kYXRhLnRvdGFsDQogICAgICAgICAgdGhpcy5sb2FkaW5nLmNsb3NlKCk7DQogICAgICAgIH0pLmNhdGNoKGVyciA9PnsNCiAgICAgICAgICBjb25zb2xlLmxvZyhlcnIpDQogICAgICAgIH0pDQogICAgICB9LA0KICAgICAgcmVzZXRRdWVyeTogZnVuY3Rpb24gKCl7DQogICAgICAgIHRoaXMucGFyYW1zLm5hbWUgPSBudWxsDQogICAgICAgIHRoaXMuZmV0Y2hSb2xlKCkNCiAgICAgIH0sDQogICAgICBoYW5kbGVGaW5kOiBmdW5jdGlvbiAoKXsNCiAgICAgICAgaWYgKHRoaXMucGFyYW1zLm5hbWUgPT0gbnVsbCl7DQogICAgICAgICAgdGhpcy4kbWVzc2FnZS5lcnJvcigi6K+36L6T5YWl6KeS6Imy5ZCNIikNCiAgICAgICAgICByZXR1cm4gZmFsc2UNCiAgICAgICAgfQ0KICAgICAgICB0aGlzLnBhcmFtcy5wYWdlTm8gPSAxDQogICAgICAgIHRoaXMuZmV0Y2hSb2xlKCkNCiAgICAgIH0sDQogICAgICBoYW5kbGVVcGRhdGU6IGZ1bmN0aW9uIChzY29wZSl7DQogICAgICAgIHRoaXMuZm9ybSA9IHNjb3BlLnJvdw0KICAgICAgICB0aGlzLmJlZm9yZVNob3coJ+S/ruaUueinkuiJsicsMSkNCiAgICAgICAgdGhpcy4kbmV4dFRpY2soKCkgPT4gew0KICAgICAgICAgIHRoaXMuYWZ0ZXJGb3JtU2hvdyhzY29wZS5yb3cpDQogICAgICAgICAgdGhpcy4kcmVmc1snZGF0YUZvcm0nXS5jbGVhclZhbGlkYXRlKCkNCiAgICAgICAgfSkNCiAgICAgIH0sDQogICAgICBoYW5kbGVDcmVhdGU6IGZ1bmN0aW9uICgpew0KICAgICAgICB0aGlzLmZvcm0gPSB0aGlzLmdldEZvcm1PYmplY3QoKQ0KICAgICAgICB0aGlzLmJlZm9yZVNob3coJ+a3u+WKoOinkuiJsicsMCkNCiAgICAgIH0sDQogICAgICBnZXRGb3JtT2JqZWN0OiBmdW5jdGlvbiAoKXsNCiAgICAgICAgcmV0dXJuew0KICAgICAgICAgIGlkOm51bGwsDQogICAgICAgICAgY29kZTonJywNCiAgICAgICAgICByZW1hcmtzOicnLA0KICAgICAgICAgIG5hbWU6JycsDQogICAgICAgICAgbWVudXM6W10NCiAgICAgICAgfQ0KICAgICAgfSwNCiAgICAgIGJlZm9yZVNob3c6IGZ1bmN0aW9uICh0aXRsZSxpc0VkaXRGb3JtKXsNCiAgICAgICAgdGhpcy5pc0VkaXRGb3JtID0gaXNFZGl0Rm9ybQ0KICAgICAgICB0aGlzLnRpdGxlID10aXRsZQ0KICAgICAgICB0aGlzLmRpYWxvZ1Zpc2libGUgPSB0cnVlDQogICAgICB9LA0KICAgICAgc3VibWl0OiBmdW5jdGlvbiAoKXsNCiAgICAgICAgdGhpcy4kcmVmc1snZGF0YUZvcm0nXS52YWxpZGF0ZSgodmFsaWQpID0+IHsNCiAgICAgICAgICBpZiAodmFsaWQpew0KICAgICAgICAgICAgLy/ojrflj5bniLboioLngrkg5a2Q6IqC54K56YCJ5Lit5LqG55qE54i26IqC54K5DQogICAgICAgICAgICBsZXQgcGFyZW50QXJyID0gdGhpcy4kcmVmcy5wZXJtc1RyZWUuZ2V0SGFsZkNoZWNrZWRLZXlzKCk7DQogICAgICAgICAgICB0aGlzLmZvcm0ubWVudXMgPSB0aGlzLiRyZWZzLnBlcm1zVHJlZS5nZXRDaGVja2VkS2V5cygpDQogICAgICAgICAgICBwYXJlbnRBcnIuZm9yRWFjaChpdGVtID0+ew0KICAgICAgICAgICAgICB0aGlzLmZvcm0ubWVudXMucHVzaChpdGVtKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICAgIGlmICh0aGlzLmlzRWRpdEZvcm0pew0KICAgICAgICAgICAgICB1cGRhdGVSb2xlKHRoaXMuZm9ybSkudGhlbihyZXMgPT57DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLkv67mlLnop5LoibLmiJDlip8iKQ0KICAgICAgICAgICAgICAgIHRoaXMuZmV0Y2hSb2xlKCkNCiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCkNCiAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+ew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfWVsc2Ugew0KICAgICAgICAgICAgICBjcmVhdGVSb2xlKHRoaXMuZm9ybSkudGhlbihyZXMgPT57DQogICAgICAgICAgICAgICAgdGhpcy4kbWVzc2FnZS5zdWNjZXNzKCLmt7vliqDop5LoibLmiJDlip8iKQ0KICAgICAgICAgICAgICAgIHRoaXMucm9sZURhdGEudW5zaGlmdChyZXMuZGF0YSkNCiAgICAgICAgICAgICAgICB0aGlzLmNsb3NlKCkNCiAgICAgICAgICAgICAgfSkuY2F0Y2goZXJyID0+ew0KICAgICAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKQ0KICAgICAgICAgICAgICB9KQ0KICAgICAgICAgICAgfQ0KICAgICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAgIGNvbnNvbGUubG9nKCdlcnJvciBzdWJtaXQhIScpOw0KICAgICAgICAgICAgcmV0dXJuIGZhbHNlOw0KICAgICAgICAgIH0NCiAgICAgICAgfSkNCiAgICAgIH0sDQogICAgICBoYW5kbGVEZWxldGU6IGZ1bmN0aW9uIChyb3cpew0KICAgICAgICB0aGlzLiRjb25maXJtKCfmraTmk43kvZzlsIbmsLjkuYXliKDpmaTor6XorrDlvZUsIOaYr+WQpue7p+e7rT8nLCAn5o+Q56S6Jywgew0KICAgICAgICAgIGNvbmZpcm1CdXR0b25UZXh0OiAn56Gu5a6aJywNCiAgICAgICAgICBjYW5jZWxCdXR0b25UZXh0OiAn5Y+W5raIJywNCiAgICAgICAgICB0eXBlOiAnd2FybmluZycNCiAgICAgICAgfSkudGhlbigoKSA9PiB7DQogICAgICAgICAgbGV0IGlkcyA9W10NCiAgICAgICAgICBpZiAocm93LmlkICE9IG51bGwpew0KICAgICAgICAgICAgaWRzLnB1c2gocm93LmlkKQ0KICAgICAgICAgIH1lbHNlIHsNCiAgICAgICAgICAgIHRoaXMubXVsdGlwbGVTZWxlY3Rpb24uZm9yRWFjaChpdGVtID0+ew0KICAgICAgICAgICAgICBpZHMucHVzaChpdGVtLmlkKQ0KICAgICAgICAgICAgfSkNCiAgICAgICAgICB9DQogICAgICAgICAgcmVtb3ZlUm9sZShpZHMpLnRoZW4ocmVzID0+IHsNCiAgICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uuc3VjY2Vzcygi5Yig6Zmk6KeS6Imy5oiQ5YqfIikNCiAgICAgICAgICAgIHRoaXMuZmV0Y2hSb2xlKCkNCiAgICAgICAgICB9KS5jYXRjaChlcnIgPT4gew0KICAgICAgICAgICAgY29uc29sZS5lcnJvcihlcnIpDQogICAgICAgICAgfSkNCiAgICAgICAgfSkuY2F0Y2goKCkgPT4gew0KICAgICAgICAgIHRoaXMuJG1lc3NhZ2Uoew0KICAgICAgICAgICAgdHlwZTogJ2luZm8nLA0KICAgICAgICAgICAgbWVzc2FnZTogJ+WPlua2iOWIoOmZpCcNCiAgICAgICAgICB9KQ0KICAgICAgICB9KQ0KICAgICAgfSwNCiAgICAgIC8vIOaJk+W8gOWKoOi9veWxgg0KICAgICAgb3BlbkxvYWRpbmc6IGZ1bmN0aW9uICgpIHsNCiAgICAgICAgdGhpcy5sb2FkaW5nID0gdGhpcy4kbG9hZGluZyh7DQogICAgICAgICAgbG9jazogdHJ1ZSwNCiAgICAgICAgICB0ZXh0OiAi5q2j5Zyo5Yqg6L295LitfiIsDQogICAgICAgICAgc3Bpbm5lcjogImVsLWljb24tbG9hZGluZyIsDQogICAgICAgICAgYmFja2dyb3VuZDogInJnYmEoMCwgMCwgMCwgMC43KSINCiAgICAgICAgfSk7DQogICAgICB9LA0KICAgICAgZGF0ZUZvcm1hdDogZnVuY3Rpb24gKHRpbWUpew0KICAgICAgICByZXR1cm4gcGFyc2VUaW1lKHRpbWUpDQogICAgICB9LA0KICAgICAgaGFuZGxlQ2xvc2U6IGZ1bmN0aW9uIChkb25lKSB7DQogICAgICAgIGRvbmUoKTsNCiAgICAgIH0sDQogICAgICBoYW5kbGVTZWxlY3Rpb25DaGFuZ2U6IGZ1bmN0aW9uKHZhbCkgew0KICAgICAgICB0aGlzLm11bHRpcGxlU2VsZWN0aW9uID0gdmFsDQogICAgICB9LA0KICAgICAgYWZ0ZXJGb3JtU2hvdzogZnVuY3Rpb24gKHJvdyl7DQogICAgICAgIC8vIOa4hemZpA0KICAgICAgICB0aGlzLiRyZWZzLnBlcm1zVHJlZS5zZXRDaGVja2VkS2V5cyhbXSkNCiAgICAgICAgaWYgKHJvdykgew0KICAgICAgICAgIHF1ZXJ5Um9sZUlkKHJvdy5pZCkudGhlbihyZXMgPT57DQogICAgICAgICAgICBsZXQgdGhhdCA9IHRoaXMNCiAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKSB7DQogICAgICAgICAgICAgIHJlcy5kYXRhLmZvckVhY2godmFsdWUgPT4gew0KICAgICAgICAgICAgICAgIHRoYXQuJHJlZnMucGVybXNUcmVlLnNldENoZWNrZWQodmFsdWUsIHRydWUsIGZhbHNlKTsNCiAgICAgICAgICAgICAgfSk7DQogICAgICAgICAgICB9LCAxMDApOw0KICAgICAgICAgIH0pLmNhdGNoKGVyciA9PnsNCiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoZXJyKQ0KICAgICAgICAgIH0pDQogICAgICAgIH0NCiAgICAgIH0sDQogICAgICBoYW5kbGVTaXplQ2hhbmdlOiBmdW5jdGlvbiAodmFsKSB7DQogICAgICAgIHRoaXMucGFyYW1zLnNpemUgPSB2YWwNCiAgICAgICAgdGhpcy5mZXRjaFJvbGUoKQ0KICAgICAgfSwNCiAgICAgIGhhbmRsZUN1cnJlbnRDaGFuZ2U6IGZ1bmN0aW9uICh2YWwpIHsNCiAgICAgICAgdGhpcy5wYXJhbXMucGFnZU5vID0gdmFsDQogICAgICAgIHRoaXMuZmV0Y2hSb2xlKCkNCiAgICAgIH0sDQogICAgICBjbG9zZTogZnVuY3Rpb24gKCl7DQogICAgICAgIHRoaXMuZGlhbG9nVmlzaWJsZSA9IGZhbHNlOw0KICAgICAgICB0aGlzLmZvcm09e30NCiAgICAgICAgdGhpcy4kcmVmcy5wZXJtc1RyZWUuc2V0Q2hlY2tlZEtleXMoW10pDQogICAgICB9LA0KICAgIH0sDQoNCiAgfQ0K"},{"version":3,"sources":["role.vue"],"names":[],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAmGA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA","file":"role.vue","sourceRoot":"src/views/system","sourcesContent":["<template>\r\n<div class=\"app-container\">\r\n  <!-- 查询和其他操作 -->\r\n  <el-form v-show=\"showSearch\" :inline=\"true\" ref=\"form\" :model=\"params\" label-width=\"68px\">\r\n    <el-form-item label=\"角色名称\">\r\n      <el-input style=\"width: 200px\" size=\"small\" v-model=\"params.name\" placeholder=\"请输入角色名称\" />\r\n    </el-form-item>\r\n    <el-form-item>\r\n      <el-button type=\"primary\" icon=\"el-icon-search\" size=\"small\" @click=\"handleFind\">查找</el-button>\r\n      <el-button icon=\"el-icon-refresh\" size=\"small\" @click=\"resetQuery\">重置</el-button>\r\n    </el-form-item>\r\n  </el-form>\r\n\r\n  <el-row :gutter=\"10\" class=\"mb8\">\r\n    <el-col :span=\"1.5\">\r\n      <el-button\r\n        v-if=\"canAdd\"\r\n        type=\"primary\"\r\n        icon=\"el-icon-plus\"\r\n        size=\"small\"\r\n        @click=\"handleCreate\"\r\n      >新增\r\n      </el-button>\r\n    </el-col> <el-col :span=\"1.5\">\r\n    <el-button\r\n      v-if=\"canDel\"\r\n      :disabled=\"!multipleSelection.length\"\r\n      type=\"danger\"\r\n      icon=\"el-icon-delete\"\r\n      size=\"small\"\r\n      @click=\"handleDelete\"\r\n    >批量删除\r\n    </el-button>\r\n  </el-col>\r\n    <right-toolbar :showSearch.sync=\"showSearch\" @queryTable=\"fetchRole\"></right-toolbar>\r\n  </el-row>\r\n\r\n  <div style=\"margin-top: 5px\">\r\n    <el-table border :data=\"roleData\" style=\"width: 100%;margin-bottom: 20px;\" default-expand-all @selection-change=\"handleSelectionChange\">\r\n      <el-table-column align=\"center\" type=\"selection\"/>\r\n      <el-table-column align=\"center\" prop=\"code\" label=\"编码\" width=\"180\" />\r\n      <el-table-column align=\"center\" prop=\"name\" label=\"名称\" />\r\n      <el-table-column align=\"center\" prop=\"remarks\" label=\"创建时间\">\r\n        <template slot-scope=\"scope\">\r\n          <span>{{dateFormat(scope.row.createdTime)}}</span>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column align=\"center\" prop=\"remarks\" label=\"备注\" />\r\n      <el-table-column align=\"center\" label=\"操作\" width=\"230\" class-name=\"small-padding fixed-width\">\r\n        <template slot-scope=\"scope\">\r\n          <el-button v-if=\"canUpdate\"  type=\"primary\" size=\"mini\" @click=\"handleUpdate(scope)\">编辑</el-button>\r\n          <el-button v-if=\"canDel\"  size=\"mini\" type=\"danger\"\r\n                     @click=\"handleDelete(scope.row)\">删除\r\n          </el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n  </div>\r\n\r\n  <!--分页区域-->\r\n  <div class=\"pagination-container\" style=\"float: right;margin-bottom: 1.25rem;margin-top: 1.25rem;\">\r\n    <el-pagination background @size-change=\"handleSizeChange\" @current-change=\"handleCurrentChange\"\r\n                   :current-page=\"params.pageNo\" :page-size=\"params.pageSize\" :page-sizes=\"[10, 20, 30]\"\r\n                   layout=\"total, sizes,prev, pager, next,jumper\" :total=\"total\">\r\n    </el-pagination>\r\n  </div>\r\n\r\n  <el-dialog center :title=\"title\" :visible.sync=\"dialogVisible\" width=\"50%\" :before-close=\"handleClose\">\r\n    <el-form :rules=\"rules\" ref=\"dataForm\" :model=\"form\" label-width=\"80px\">\r\n      <el-form-item prop=\"code\" label=\"角色编码\">\r\n        <el-input v-model=\"form.code\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"name\" label=\"角色名称\">\r\n        <el-input v-model=\"form.name\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item prop=\"remarks\" label=\"备注\">\r\n        <el-input v-model=\"form.remarks\"></el-input>\r\n      </el-form-item>\r\n      <el-form-item label=\"角色权限\">\r\n        <el-tree\r\n          :data=\"menuData\"\r\n          show-checkbox\r\n          node-key=\"id\"\r\n          ref=\"permsTree\"\r\n          default-expand-all\r\n          :props=\"defaultProps\">\r\n        </el-tree>\r\n      </el-form-item>\r\n    </el-form>\r\n\r\n    <span slot=\"footer\" class=\"dialog-footer\">\r\n    <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n    <el-button type=\"primary\" @click=\"submit\">确 定</el-button>\r\n  </span>\r\n  </el-dialog>\r\n\r\n</div>\r\n</template>\r\n<script>\r\nimport {fetchRole,fetchMenu,queryRoleId,updateRole,createRole,removeRole} from '@/api/system'\r\nimport {parseTime} from '@/utils'\r\nimport ScrollPane from \"@/layout/components/TagsView/ScrollPane\";\r\nimport {mapGetters} from \"vuex\";\r\nimport {hasAuth} from \"@/utils/auth\";\r\n  export default {\r\n    components: {ScrollPane},\r\n    data() {\r\n      return {\r\n        checkedTree:[],\r\n        multipleSelection:[],\r\n        defaultProps: {\r\n          children: 'children',\r\n          label: 'title'\r\n        },\r\n        isEditForm:0,\r\n        dialogVisible: false,\r\n        showSearch: true,\r\n        title: null,\r\n        total: 0,\r\n        params:{\r\n          pageNo:1,\r\n          pageSize:10,\r\n          name:null\r\n        },\r\n        form:{},\r\n        menuData:[],\r\n        roleData: [],\r\n        // 加载层信息\r\n        loading: [],\r\n        rules: {\r\n          code: [\r\n            { required: true, message: '请输入角色编码', trigger: 'change' },\r\n          ],\r\n          name: [\r\n            { required: true, message: '请输入角色名称', trigger: 'change' },\r\n          ]\r\n        }\r\n      }\r\n    },\r\n    computed:{\r\n      ...mapGetters([\r\n        'pres'\r\n      ]),\r\n      canAdd:function() {\r\n        return hasAuth(this.pres, '/system/role/create')\r\n      },\r\n      canDel: function() {\r\n        return hasAuth(this.pres, '/system/role/remove')\r\n      },\r\n      canUpdate: function() {\r\n        return hasAuth(this.pres, '/system/role/update')\r\n      },\r\n    },\r\n    created(){\r\n      this.openLoading();\r\n      this.fetchRole()\r\n      fetchMenu().then(res =>{\r\n        this.menuData = res.data\r\n      }).catch(err =>{\r\n        console.log(err)\r\n      })\r\n    },\r\n    methods: {\r\n      fetchRole: function (){\r\n        fetchRole(this.params).then(res =>{\r\n          this.roleData = res.data.records\r\n          this.total = res.data.total\r\n          this.loading.close();\r\n        }).catch(err =>{\r\n          console.log(err)\r\n        })\r\n      },\r\n      resetQuery: function (){\r\n        this.params.name = null\r\n        this.fetchRole()\r\n      },\r\n      handleFind: function (){\r\n        if (this.params.name == null){\r\n          this.$message.error(\"请输入角色名\")\r\n          return false\r\n        }\r\n        this.params.pageNo = 1\r\n        this.fetchRole()\r\n      },\r\n      handleUpdate: function (scope){\r\n        this.form = scope.row\r\n        this.beforeShow('修改角色',1)\r\n        this.$nextTick(() => {\r\n          this.afterFormShow(scope.row)\r\n          this.$refs['dataForm'].clearValidate()\r\n        })\r\n      },\r\n      handleCreate: function (){\r\n        this.form = this.getFormObject()\r\n        this.beforeShow('添加角色',0)\r\n      },\r\n      getFormObject: function (){\r\n        return{\r\n          id:null,\r\n          code:'',\r\n          remarks:'',\r\n          name:'',\r\n          menus:[]\r\n        }\r\n      },\r\n      beforeShow: function (title,isEditForm){\r\n        this.isEditForm = isEditForm\r\n        this.title =title\r\n        this.dialogVisible = true\r\n      },\r\n      submit: function (){\r\n        this.$refs['dataForm'].validate((valid) => {\r\n          if (valid){\r\n            //获取父节点 子节点选中了的父节点\r\n            let parentArr = this.$refs.permsTree.getHalfCheckedKeys();\r\n            this.form.menus = this.$refs.permsTree.getCheckedKeys()\r\n            parentArr.forEach(item =>{\r\n              this.form.menus.push(item)\r\n            })\r\n            if (this.isEditForm){\r\n              updateRole(this.form).then(res =>{\r\n                this.$message.success(\"修改角色成功\")\r\n                this.fetchRole()\r\n                this.close()\r\n              }).catch(err =>{\r\n                console.error(err)\r\n              })\r\n            }else {\r\n              createRole(this.form).then(res =>{\r\n                this.$message.success(\"添加角色成功\")\r\n                this.roleData.unshift(res.data)\r\n                this.close()\r\n              }).catch(err =>{\r\n                console.error(err)\r\n              })\r\n            }\r\n          }else {\r\n            console.log('error submit!!');\r\n            return false;\r\n          }\r\n        })\r\n      },\r\n      handleDelete: function (row){\r\n        this.$confirm('此操作将永久删除该记录, 是否继续?', '提示', {\r\n          confirmButtonText: '确定',\r\n          cancelButtonText: '取消',\r\n          type: 'warning'\r\n        }).then(() => {\r\n          let ids =[]\r\n          if (row.id != null){\r\n            ids.push(row.id)\r\n          }else {\r\n            this.multipleSelection.forEach(item =>{\r\n              ids.push(item.id)\r\n            })\r\n          }\r\n          removeRole(ids).then(res => {\r\n            this.$message.success(\"删除角色成功\")\r\n            this.fetchRole()\r\n          }).catch(err => {\r\n            console.error(err)\r\n          })\r\n        }).catch(() => {\r\n          this.$message({\r\n            type: 'info',\r\n            message: '取消删除'\r\n          })\r\n        })\r\n      },\r\n      // 打开加载层\r\n      openLoading: function () {\r\n        this.loading = this.$loading({\r\n          lock: true,\r\n          text: \"正在加载中~\",\r\n          spinner: \"el-icon-loading\",\r\n          background: \"rgba(0, 0, 0, 0.7)\"\r\n        });\r\n      },\r\n      dateFormat: function (time){\r\n        return parseTime(time)\r\n      },\r\n      handleClose: function (done) {\r\n        done();\r\n      },\r\n      handleSelectionChange: function(val) {\r\n        this.multipleSelection = val\r\n      },\r\n      afterFormShow: function (row){\r\n        // 清除\r\n        this.$refs.permsTree.setCheckedKeys([])\r\n        if (row) {\r\n          queryRoleId(row.id).then(res =>{\r\n            let that = this\r\n            setTimeout(function() {\r\n              res.data.forEach(value => {\r\n                that.$refs.permsTree.setChecked(value, true, false);\r\n              });\r\n            }, 100);\r\n          }).catch(err =>{\r\n            console.error(err)\r\n          })\r\n        }\r\n      },\r\n      handleSizeChange: function (val) {\r\n        this.params.size = val\r\n        this.fetchRole()\r\n      },\r\n      handleCurrentChange: function (val) {\r\n        this.params.pageNo = val\r\n        this.fetchRole()\r\n      },\r\n      close: function (){\r\n        this.dialogVisible = false;\r\n        this.form={}\r\n        this.$refs.permsTree.setCheckedKeys([])\r\n      },\r\n    },\r\n\r\n  }\r\n</script>\r\n"]}]}