{"remainingRequest":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\src\\components\\model\\RegisterModel.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\src\\components\\model\\RegisterModel.vue","mtime":1721286706045},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\babel.config.js","mtime":1721286706021},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgc2VuZEVtYWlsQ29kZSwgZW1haWxSZWdpc3RlciwgZW1haWxMb2dpbiB9IGZyb20gIi4uLy4uL2FwaSI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiAoKSB7CiAgICByZXR1cm4gewogICAgICB1c2VybmFtZTogIiIsCiAgICAgIGNvZGU6ICIiLAogICAgICBwYXNzd29yZDogIiIsCiAgICAgIG5pY2tuYW1lOiAiIiwKICAgICAgZmxhZzogdHJ1ZSwKICAgICAgY29kZU1zZzogIuWPkemAgSIsCiAgICAgIHRpbWU6IDYwLAogICAgICBzaG93OiBmYWxzZQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIG9wZW5Mb2dpbigpIHsKICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucmVnaXN0ZXJGbGFnID0gZmFsc2U7CiAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmxvZ2luRmxhZyA9IHRydWU7CiAgICB9LAogICAgc2VuZENvZGUoKSB7CiAgICAgIC8v5Y+R6YCB6YKu5Lu2CiAgICAgIHRoaXMuY291bnREb3duKCk7CiAgICAgIHNlbmRFbWFpbENvZGUodGhpcy51c2VybmFtZSkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tZXNzYWdlCiAgICAgICAgfSk7CiAgICAgIH0pLmNhdGNoKGVyciA9PiB7CiAgICAgICAgdGhpcy4kdG9hc3QoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIG1lc3NhZ2U6IGVyci5tZXNzYWdlCiAgICAgICAgfSk7CiAgICAgIH0pOwogICAgfSwKICAgIGNvdW50RG93bigpIHsKICAgICAgdGhpcy5mbGFnID0gdHJ1ZTsKICAgICAgdGhpcy50aW1lciA9IHNldEludGVydmFsKCgpID0+IHsKICAgICAgICB0aGlzLnRpbWUtLTsKICAgICAgICB0aGlzLmNvZGVNc2cgPSB0aGlzLnRpbWUgKyAicyI7CiAgICAgICAgaWYgKHRoaXMudGltZSA8PSAwKSB7CiAgICAgICAgICBjbGVhckludGVydmFsKHRoaXMudGltZXIpOwogICAgICAgICAgdGhpcy5jb2RlTXNnID0gIuWPkemAgSI7CiAgICAgICAgICB0aGlzLnRpbWUgPSA2MDsKICAgICAgICAgIHRoaXMuZmxhZyA9IGZhbHNlOwogICAgICAgIH0KICAgICAgfSwgMTAwMCk7CiAgICB9LAogICAgcmVnaXN0ZXIoKSB7CiAgICAgIHZhciByZWcgPSAvXltBLVphLXowLTlcdTRlMDAtXHU5ZmE1X10rQFthLXpBLVowLTlfLV0rKFwuW2EtekEtWjAtOV8tXSspKyQvOwogICAgICBpZiAoIXJlZy50ZXN0KHRoaXMudXNlcm5hbWUpKSB7CiAgICAgICAgdGhpcy4kdG9hc3QoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIG1lc3NhZ2U6ICLpgq7nrrHmoLzlvI/kuI3mraPnoa4iCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLmNvZGUudHJpbSgpLmxlbmd0aCAhPT0gNikgewogICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBtZXNzYWdlOiAi6K+36L6T5YWlNuS9jemqjOivgeeggSIKICAgICAgICB9KTsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgaWYgKHRoaXMucGFzc3dvcmQudHJpbSgpLmxlbmd0aCA8IDYpIHsKICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgbWVzc2FnZTogIuWvhueggeS4jeiDveWwkeS6jjbkvY0iCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGlmICh0aGlzLm5pY2tuYW1lLnRyaW0oKS5sZW5ndGggPCAyKSB7CiAgICAgICAgdGhpcy4kdG9hc3QoewogICAgICAgICAgdHlwZTogImVycm9yIiwKICAgICAgICAgIG1lc3NhZ2U6ICLmmLXnp7DkuI3og73lsJHkuo4y5L2NIgogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBjb25zdCB1c2VyID0gewogICAgICAgIGVtYWlsOiB0aGlzLnVzZXJuYW1lLAogICAgICAgIHBhc3N3b3JkOiB0aGlzLnBhc3N3b3JkLAogICAgICAgIG5pY2tuYW1lOiB0aGlzLm5pY2tuYW1lLAogICAgICAgIGNvZGU6IHRoaXMuY29kZQogICAgICB9OwogICAgICBlbWFpbFJlZ2lzdGVyKHVzZXIpLnRoZW4ocmVzID0+IHsKICAgICAgICBlbWFpbExvZ2luKHsKICAgICAgICAgIGVtYWlsOiB1c2VyLmVtYWlsLAogICAgICAgICAgcGFzc3dvcmQ6IHVzZXIucGFzc3dvcmQKICAgICAgICB9KS50aGVuKHJlcyA9PiB7CiAgICAgICAgICB0aGlzLnVzZXJuYW1lID0gIiI7CiAgICAgICAgICB0aGlzLnBhc3N3b3JkID0gIiI7CiAgICAgICAgICB0aGlzLm5pY2tuYW1lID0gIiI7CiAgICAgICAgICB0aGlzLiRzdG9yZS5jb21taXQoImxvZ2luIiwgcmVzLmRhdGEpOwogICAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJjbG9zZU1vZGVsIik7CiAgICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgICAgbWVzc2FnZTogIueZu+W9leaIkOWKnyIKICAgICAgICAgIH0pOwogICAgICAgIH0pOwogICAgICB9KS5jYXRjaChlcnIgPT4gewogICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBtZXNzYWdlOiBlcnIubWVzc2FnZQogICAgICAgIH0pOwogICAgICB9KTsKICAgIH0KICB9LAogIGNvbXB1dGVkOiB7CiAgICByZWdpc3RlckZsYWc6IHsKICAgICAgc2V0KHZhbHVlKSB7CiAgICAgICAgdGhpcy4kc3RvcmUuc3RhdGUucmVnaXN0ZXJGbGFnID0gdmFsdWU7CiAgICAgIH0sCiAgICAgIGdldCgpIHsKICAgICAgICByZXR1cm4gdGhpcy4kc3RvcmUuc3RhdGUucmVnaXN0ZXJGbGFnOwogICAgICB9CiAgICB9LAogICAgaXNNb2JpbGUoKSB7CiAgICAgIGNvbnN0IGNsaWVudFdpZHRoID0gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudFdpZHRoOwogICAgICBpZiAoY2xpZW50V2lkdGggPiA5NjApIHsKICAgICAgICByZXR1cm4gZmFsc2U7CiAgICAgIH0KICAgICAgcmV0dXJuIHRydWU7CiAgICB9CiAgfSwKICB3YXRjaDogewogICAgdXNlcm5hbWUodmFsdWUpIHsKICAgICAgdmFyIHJlZyA9IC9eW0EtWmEtejAtOVx1NGUwMC1cdTlmYTVdK0BbYS16QS1aMC05Xy1dKyhcLlthLXpBLVowLTlfLV0rKSskLzsKICAgICAgaWYgKHJlZy50ZXN0KHZhbHVlKSkgewogICAgICAgIHRoaXMuZmxhZyA9IGZhbHNlOwogICAgICB9IGVsc2UgewogICAgICAgIHRoaXMuZmxhZyA9IHRydWU7CiAgICAgIH0KICAgIH0KICB9Cn07"},{"version":3,"names":["sendEmailCode","emailRegister","emailLogin","data","username","code","password","nickname","flag","codeMsg","time","show","methods","openLogin","$store","state","registerFlag","loginFlag","sendCode","countDown","then","res","$toast","type","message","catch","err","timer","setInterval","clearInterval","register","reg","test","trim","length","user","email","commit","computed","set","value","get","isMobile","clientWidth","document","documentElement","watch"],"sources":["src/components/model/RegisterModel.vue"],"sourcesContent":["<template>\r\n  <v-dialog v-model=\"registerFlag\" max-width=\"460\">\r\n    <v-card class=\"login-container\" style=\"border-radius:4px;height: 550px\">\r\n      <v-icon class=\"float-right\" @click=\"registerFlag = false\">\r\n        mdi-close\r\n      </v-icon>\r\n      <div class=\"login-wrapper\">\r\n        <!-- 用户名 -->\r\n        <v-text-field\r\n          v-model=\"username\"\r\n          label=\"邮箱号\"\r\n          placeholder=\"请输入您的邮箱号\"\r\n          clearable\r\n          @keyup.enter=\"register\"\r\n        />\r\n        <v-text-field\r\n          v-model=\"nickname\"\r\n          label=\"昵称\"\r\n          placeholder=\"请输入您的昵称\"\r\n          clearable\r\n          @keyup.enter=\"register\"\r\n        />\r\n        <!-- 验证码 -->\r\n        <div class=\"mt-7 send-wrapper\">\r\n          <v-text-field\r\n            maxlength=\"6\"\r\n            v-model=\"code\"\r\n            label=\"验证码\"\r\n            placeholder=\"请输入6位验证码\"\r\n            @keyup.enter=\"register\"\r\n          />\r\n          <v-btn text small :disabled=\"flag\" @click=\"sendCode\">\r\n            {{ codeMsg }}\r\n          </v-btn>\r\n        </div>\r\n        <!-- 密码 -->\r\n        <v-text-field\r\n          v-model=\"password\"\r\n          class=\"mt-7\"\r\n          label=\"密码\"\r\n          placeholder=\"请输入您的密码\"\r\n          @keyup.enter=\"register\"\r\n          :append-icon=\"show ? 'mdi-eye' : 'mdi-eye-off'\"\r\n          :type=\"show ? 'text' : 'password'\"\r\n          @click:append=\"show = !show\"\r\n        />\r\n        <!-- 注册按钮 -->\r\n        <v-btn\r\n          class=\"mt-7\"\r\n          block\r\n          color=\"red\"\r\n          style=\"color:#fff\"\r\n          @click=\"register\"\r\n        >\r\n          注册\r\n        </v-btn>\r\n        <!-- 登录 -->\r\n        <div class=\"mt-10 login-tip\">\r\n          已有账号？<span @click=\"openLogin\">登录</span>\r\n        </div>\r\n      </div>\r\n    </v-card>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script>\r\nimport { sendEmailCode, emailRegister, emailLogin } from \"../../api\";\r\nexport default {\r\n  data: function() {\r\n    return {\r\n      username: \"\",\r\n      code: \"\",\r\n      password: \"\",\r\n      nickname: \"\",\r\n      flag: true,\r\n      codeMsg: \"发送\",\r\n      time: 60,\r\n      show: false\r\n    };\r\n  },\r\n  methods: {\r\n    openLogin() {\r\n      this.$store.state.registerFlag = false;\r\n      this.$store.state.loginFlag = true;\r\n    },\r\n    sendCode() {\r\n      //发送邮件\r\n      this.countDown();\r\n      sendEmailCode(this.username).then(res => {\r\n        this.$toast({ type: \"success\", message: res.message});\r\n      }).catch(err =>{\r\n        this.$toast({ type: \"error\", message: err.message });\r\n      });\r\n    },\r\n    countDown() {\r\n      this.flag = true;\r\n      this.timer = setInterval(() => {\r\n        this.time--;\r\n        this.codeMsg = this.time + \"s\";\r\n        if (this.time <= 0) {\r\n          clearInterval(this.timer);\r\n          this.codeMsg = \"发送\";\r\n          this.time = 60;\r\n          this.flag = false;\r\n        }\r\n      }, 1000);\r\n    },\r\n    register() {\r\n      var reg = /^[A-Za-z0-9\\u4e00-\\u9fa5_]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n      if (!reg.test(this.username)) {\r\n        this.$toast({ type: \"error\", message: \"邮箱格式不正确\" });\r\n        return false;\r\n      }\r\n      if (this.code.trim().length !== 6) {\r\n        this.$toast({ type: \"error\", message: \"请输入6位验证码\" });\r\n        return false;\r\n      }\r\n      if (this.password.trim().length < 6) {\r\n        this.$toast({ type: \"error\", message: \"密码不能少于6位\" });\r\n        return false;\r\n      }\r\n      if (this.nickname.trim().length < 2) {\r\n        this.$toast({ type: \"error\", message: \"昵称不能少于2位\" });\r\n        return false;\r\n      }\r\n      const user = {\r\n        email: this.username,\r\n        password: this.password,\r\n        nickname: this.nickname,\r\n        code: this.code\r\n      };\r\n      emailRegister(user).then(res => {\r\n        emailLogin({email:user.email,password:user.password}).then(res => {\r\n          this.username = \"\";\r\n          this.password = \"\";\r\n          this.nickname = \"\";\r\n          this.$store.commit(\"login\", res.data);\r\n          this.$store.commit(\"closeModel\");\r\n          this.$toast({ type: \"success\", message: \"登录成功\" });\r\n        });\r\n      }).catch(err =>{\r\n        this.$toast({ type: \"error\", message: err.message });\r\n      });\r\n    }\r\n  },\r\n  computed: {\r\n    registerFlag: {\r\n      set(value) {\r\n        this.$store.state.registerFlag = value;\r\n      },\r\n      get() {\r\n        return this.$store.state.registerFlag;\r\n      }\r\n    },\r\n    isMobile() {\r\n      const clientWidth = document.documentElement.clientWidth;\r\n      if (clientWidth > 960) {\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  },\r\n  watch: {\r\n    username(value) {\r\n      var reg = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n      if (reg.test(value)) {\r\n        this.flag = false;\r\n      } else {\r\n        this.flag = true;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n"],"mappings":"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","ignoreList":[]}]}