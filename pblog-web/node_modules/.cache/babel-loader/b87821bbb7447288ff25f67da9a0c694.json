{"remainingRequest":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js??ref--1-0!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js??vue-loader-options!E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\src\\components\\model\\EmailModel.vue?vue&type=script&lang=js","dependencies":[{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\src\\components\\model\\EmailModel.vue","mtime":1721286706044},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\babel.config.js","mtime":1721286706021},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\babel-loader@8.3.0\\node_modules\\babel-loader\\lib\\index.js","mtime":456789000000},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\cache-loader@4.1.0\\node_modules\\cache-loader\\dist\\cjs.js","mtime":499162500000},{"path":"E:\\MyWenJian\\Blogs\\rulin-blog\\pblog-web\\node_modules\\.store\\vue-loader@15.11.1\\node_modules\\vue-loader\\lib\\index.js","mtime":499162500000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IHsgc2VuZEVtYWlsQ29kZSwgYmluZEVtYWlsIH0gZnJvbSAiLi4vLi4vYXBpIjsKZXhwb3J0IGRlZmF1bHQgewogIGRhdGE6IGZ1bmN0aW9uICgpIHsKICAgIHJldHVybiB7CiAgICAgIGVtYWlsOiB0aGlzLiRzdG9yZS5zdGF0ZS5lbWFpbCwKICAgICAgY29kZTogIiIsCiAgICAgIGZsYWc6IHRydWUsCiAgICAgIGNvZGVNc2c6ICLlj5HpgIEiLAogICAgICB0aW1lOiAxMjAsCiAgICAgIHNob3c6IGZhbHNlCiAgICB9OwogIH0sCiAgbWV0aG9kczogewogICAgc2VuZENvZGUoKSB7CiAgICAgIC8v5Y+R6YCB6YKu5Lu2CiAgICAgIHNlbmRFbWFpbENvZGUodGhpcy5lbWFpbCkudGhlbihyZXMgPT4gewogICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgIHR5cGU6ICJzdWNjZXNzIiwKICAgICAgICAgIG1lc3NhZ2U6IHJlcy5tZXNzYWdlCiAgICAgICAgfSk7CiAgICAgICAgdGhpcy5jb3VudERvd24oKTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9LAogICAgY291bnREb3duKCkgewogICAgICB0aGlzLmZsYWcgPSB0cnVlOwogICAgICB0aGlzLnRpbWVyID0gc2V0SW50ZXJ2YWwoKCkgPT4gewogICAgICAgIHRoaXMudGltZS0tOwogICAgICAgIHRoaXMuY29kZU1zZyA9IHRoaXMudGltZSArICJzIjsKICAgICAgICBpZiAodGhpcy50aW1lIDw9IDApIHsKICAgICAgICAgIGNsZWFySW50ZXJ2YWwodGhpcy50aW1lcik7CiAgICAgICAgICB0aGlzLmNvZGVNc2cgPSAi5Y+R6YCBIjsKICAgICAgICAgIHRoaXMudGltZSA9IDYwOwogICAgICAgICAgdGhpcy5mbGFnID0gZmFsc2U7CiAgICAgICAgfQogICAgICB9LCAxMDAwKTsKICAgIH0sCiAgICBzYXZlVXNlckVtYWlsKCkgewogICAgICB2YXIgcmVnID0gL15bQS1aYS16MC05XHU0ZTAwLVx1OWZhNV9dK0BbYS16QS1aMC05Xy1dKyhcLlthLXpBLVowLTlfLV0rKSskLzsKICAgICAgaWYgKCFyZWcudGVzdCh0aGlzLmVtYWlsKSkgewogICAgICAgIHRoaXMuJHRvYXN0KHsKICAgICAgICAgIHR5cGU6ICJlcnJvciIsCiAgICAgICAgICBtZXNzYWdlOiAi6YKu566x5qC85byP5LiN5q2j56GuIgogICAgICAgIH0pOwogICAgICAgIHJldHVybiBmYWxzZTsKICAgICAgfQogICAgICBpZiAodGhpcy5jb2RlLnRyaW0oKS5sZW5ndGggIT09IDYpIHsKICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgbWVzc2FnZTogIuivt+i+k+WFpTbkvY3pqozor4HnoIEiCiAgICAgICAgfSk7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIGNvbnN0IHVzZXIgPSB7CiAgICAgICAgZW1haWw6IHRoaXMuZW1haWwsCiAgICAgICAgY29kZTogdGhpcy5jb2RlCiAgICAgIH07CiAgICAgIGJpbmRFbWFpbCh1c2VyKS50aGVuKHJlcyA9PiB7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJzYXZlRW1haWwiLCB0aGlzLmVtYWlsKTsKICAgICAgICB0aGlzLmVtYWlsID0gIiI7CiAgICAgICAgdGhpcy5jb2RlID0gIiI7CiAgICAgICAgdGhpcy4kc3RvcmUuY29tbWl0KCJjbG9zZU1vZGVsIik7CiAgICAgICAgdGhpcy4kdG9hc3QoewogICAgICAgICAgdHlwZTogInN1Y2Nlc3MiLAogICAgICAgICAgbWVzc2FnZTogcmVzLm1lc3NhZ2UKICAgICAgICB9KTsKICAgICAgfSkuY2F0Y2goZXJyID0+IHsKICAgICAgICB0aGlzLiR0b2FzdCh7CiAgICAgICAgICB0eXBlOiAiZXJyb3IiLAogICAgICAgICAgbWVzc2FnZTogZXJyLm1lc3NhZ2UKICAgICAgICB9KTsKICAgICAgfSk7CiAgICB9CiAgfSwKICBjb21wdXRlZDogewogICAgZW1haWxGbGFnOiB7CiAgICAgIHNldCh2YWx1ZSkgewogICAgICAgIHRoaXMuJHN0b3JlLnN0YXRlLmVtYWlsRmxhZyA9IHZhbHVlOwogICAgICB9LAogICAgICBnZXQoKSB7CiAgICAgICAgcmV0dXJuIHRoaXMuJHN0b3JlLnN0YXRlLmVtYWlsRmxhZzsKICAgICAgfQogICAgfSwKICAgIGlzTW9iaWxlKCkgewogICAgICBjb25zdCBjbGllbnRXaWR0aCA9IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudC5jbGllbnRXaWR0aDsKICAgICAgaWYgKGNsaWVudFdpZHRoID4gOTYwKSB7CiAgICAgICAgcmV0dXJuIGZhbHNlOwogICAgICB9CiAgICAgIHJldHVybiB0cnVlOwogICAgfQogIH0sCiAgd2F0Y2g6IHsKICAgIGVtYWlsKHZhbHVlKSB7CiAgICAgIHZhciByZWcgPSAvXltBLVphLXowLTlcdTRlMDAtXHU5ZmE1XStAW2EtekEtWjAtOV8tXSsoXC5bYS16QS1aMC05Xy1dKykrJC87CiAgICAgIGlmIChyZWcudGVzdCh2YWx1ZSkpIHsKICAgICAgICB0aGlzLmZsYWcgPSBmYWxzZTsKICAgICAgfSBlbHNlIHsKICAgICAgICB0aGlzLmZsYWcgPSB0cnVlOwogICAgICB9CiAgICB9CiAgfQp9Ow=="},{"version":3,"names":["sendEmailCode","bindEmail","data","email","$store","state","code","flag","codeMsg","time","show","methods","sendCode","then","res","$toast","type","message","countDown","catch","err","timer","setInterval","clearInterval","saveUserEmail","reg","test","trim","length","user","commit","computed","emailFlag","set","value","get","isMobile","clientWidth","document","documentElement","watch"],"sources":["src/components/model/EmailModel.vue"],"sourcesContent":["<template>\r\n  <v-dialog v-model=\"emailFlag\"  max-width=\"460\">\r\n    <v-card class=\"login-container\" style=\"border-radius:4px\">\r\n      <v-icon class=\"float-right\" @click=\"emailFlag = false\">\r\n        mdi-close\r\n      </v-icon>\r\n      <div class=\"login-wrapper\">\r\n        <!-- 用户名 -->\r\n        <v-text-field\r\n          v-model=\"email\"\r\n          label=\"邮箱号\"\r\n          placeholder=\"请输入您的邮箱号\"\r\n          clearable\r\n          @keyup.enter=\"register\"\r\n        />\r\n        <!-- 验证码 -->\r\n        <div class=\"mt-7 send-wrapper\">\r\n          <v-text-field\r\n            maxlength=\"6\"\r\n            v-model=\"code\"\r\n            label=\"验证码\"\r\n            placeholder=\"请输入6位验证码\"\r\n            @keyup.enter=\"register\"\r\n          />\r\n          <v-btn text small :disabled=\"flag\" @click=\"sendCode\">\r\n            {{ codeMsg }}\r\n          </v-btn>\r\n        </div>\r\n        <!-- 按钮 -->\r\n        <v-btn\r\n          class=\"mt-7\"\r\n          block\r\n          color=\"blue\"\r\n          style=\"color:#fff\"\r\n          @click=\"saveUserEmail\"\r\n        >\r\n          绑定\r\n        </v-btn>\r\n      </div>\r\n    </v-card>\r\n  </v-dialog>\r\n</template>\r\n\r\n<script>\r\nimport {sendEmailCode,bindEmail} from \"../../api\";\r\nexport default {\r\n  data: function() {\r\n    return {\r\n      email: this.$store.state.email,\r\n      code: \"\",\r\n      flag: true,\r\n      codeMsg: \"发送\",\r\n      time: 120,\r\n      show: false\r\n    };\r\n  },\r\n  methods: {\r\n    sendCode() {\r\n      //发送邮件\r\n      sendEmailCode(this.email).then(res => {\r\n            this.$toast({ type: \"success\", message: res.message });\r\n            this.countDown();\r\n        }).catch(err =>{\r\n            this.$toast({ type: \"error\", message: err.message });\r\n      });\r\n    },\r\n    countDown() {\r\n      this.flag = true;\r\n      this.timer = setInterval(() => {\r\n        this.time--;\r\n        this.codeMsg = this.time + \"s\";\r\n        if (this.time <= 0) {\r\n          clearInterval(this.timer);\r\n          this.codeMsg = \"发送\";\r\n          this.time = 60;\r\n          this.flag = false;\r\n        }\r\n      }, 1000);\r\n    },\r\n    saveUserEmail() {\r\n      var reg = /^[A-Za-z0-9\\u4e00-\\u9fa5_]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n      if (!reg.test(this.email)) {\r\n        this.$toast({ type: \"error\", message: \"邮箱格式不正确\" });\r\n        return false;\r\n      }\r\n      if (this.code.trim().length !== 6) {\r\n        this.$toast({ type: \"error\", message: \"请输入6位验证码\" });\r\n        return false;\r\n      }\r\n      const user = {\r\n        email: this.email,\r\n        code: this.code\r\n      };\r\n      bindEmail(user).then(res => {\r\n          this.$store.commit(\"saveEmail\", this.email);\r\n          this.email = \"\";\r\n          this.code = \"\";\r\n          this.$store.commit(\"closeModel\");\r\n          this.$toast({ type: \"success\", message: res.message });\r\n      }).catch(err =>{\r\n        this.$toast({ type: \"error\", message: err.message });\r\n      });\r\n    }\r\n  },\r\n  computed: {\r\n    emailFlag: {\r\n      set(value) {\r\n        this.$store.state.emailFlag = value;\r\n      },\r\n      get() {\r\n        return this.$store.state.emailFlag;\r\n      }\r\n    },\r\n    isMobile() {\r\n      const clientWidth = document.documentElement.clientWidth;\r\n      if (clientWidth > 960) {\r\n        return false;\r\n      }\r\n      return true;\r\n    }\r\n  },\r\n  watch: {\r\n    email(value) {\r\n      var reg = /^[A-Za-z0-9\\u4e00-\\u9fa5]+@[a-zA-Z0-9_-]+(\\.[a-zA-Z0-9_-]+)+$/;\r\n      if (reg.test(value)) {\r\n        this.flag = false;\r\n      } else {\r\n        this.flag = true;\r\n      }\r\n    }\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n@media (min-width: 760px) {\r\n  .login-container {\r\n    padding: 1rem;\r\n    border-radius: 4px;\r\n    height: 400px;\r\n  }\r\n}\r\n</style>\r\n"],"mappings":"AA4CA,SAAAA,aAAA,EAAAC,SAAA;AACA;EACAC,IAAA,WAAAA,CAAA;IACA;MACAC,KAAA,OAAAC,MAAA,CAAAC,KAAA,CAAAF,KAAA;MACAG,IAAA;MACAC,IAAA;MACAC,OAAA;MACAC,IAAA;MACAC,IAAA;IACA;EACA;EACAC,OAAA;IACAC,SAAA;MACA;MACAZ,aAAA,MAAAG,KAAA,EAAAU,IAAA,CAAAC,GAAA;QACA,KAAAC,MAAA;UAAAC,IAAA;UAAAC,OAAA,EAAAH,GAAA,CAAAG;QAAA;QACA,KAAAC,SAAA;MACA,GAAAC,KAAA,CAAAC,GAAA;QACA,KAAAL,MAAA;UAAAC,IAAA;UAAAC,OAAA,EAAAG,GAAA,CAAAH;QAAA;MACA;IACA;IACAC,UAAA;MACA,KAAAX,IAAA;MACA,KAAAc,KAAA,GAAAC,WAAA;QACA,KAAAb,IAAA;QACA,KAAAD,OAAA,QAAAC,IAAA;QACA,SAAAA,IAAA;UACAc,aAAA,MAAAF,KAAA;UACA,KAAAb,OAAA;UACA,KAAAC,IAAA;UACA,KAAAF,IAAA;QACA;MACA;IACA;IACAiB,cAAA;MACA,IAAAC,GAAA;MACA,KAAAA,GAAA,CAAAC,IAAA,MAAAvB,KAAA;QACA,KAAAY,MAAA;UAAAC,IAAA;UAAAC,OAAA;QAAA;QACA;MACA;MACA,SAAAX,IAAA,CAAAqB,IAAA,GAAAC,MAAA;QACA,KAAAb,MAAA;UAAAC,IAAA;UAAAC,OAAA;QAAA;QACA;MACA;MACA,MAAAY,IAAA;QACA1B,KAAA,OAAAA,KAAA;QACAG,IAAA,OAAAA;MACA;MACAL,SAAA,CAAA4B,IAAA,EAAAhB,IAAA,CAAAC,GAAA;QACA,KAAAV,MAAA,CAAA0B,MAAA,mBAAA3B,KAAA;QACA,KAAAA,KAAA;QACA,KAAAG,IAAA;QACA,KAAAF,MAAA,CAAA0B,MAAA;QACA,KAAAf,MAAA;UAAAC,IAAA;UAAAC,OAAA,EAAAH,GAAA,CAAAG;QAAA;MACA,GAAAE,KAAA,CAAAC,GAAA;QACA,KAAAL,MAAA;UAAAC,IAAA;UAAAC,OAAA,EAAAG,GAAA,CAAAH;QAAA;MACA;IACA;EACA;EACAc,QAAA;IACAC,SAAA;MACAC,IAAAC,KAAA;QACA,KAAA9B,MAAA,CAAAC,KAAA,CAAA2B,SAAA,GAAAE,KAAA;MACA;MACAC,IAAA;QACA,YAAA/B,MAAA,CAAAC,KAAA,CAAA2B,SAAA;MACA;IACA;IACAI,SAAA;MACA,MAAAC,WAAA,GAAAC,QAAA,CAAAC,eAAA,CAAAF,WAAA;MACA,IAAAA,WAAA;QACA;MACA;MACA;IACA;EACA;EACAG,KAAA;IACArC,MAAA+B,KAAA;MACA,IAAAT,GAAA;MACA,IAAAA,GAAA,CAAAC,IAAA,CAAAQ,KAAA;QACA,KAAA3B,IAAA;MACA;QACA,KAAAA,IAAA;MACA;IACA;EACA;AACA","ignoreList":[]}]}